{"version":3,"sources":["firebase.js","services/authentication.js","services/theming.js","components/LaunchScreen/LaunchScreen.js","components/Bar/Bar.js","components/EmptyState/EmptyState.js","services/bgg.js","components/BGGBrowser/BGGBrowser.js","components/HomeContent/HomeContent.js","components/NotFoundContent/NotFoundContent.js","components/Router/Router.js","components/AuthProviderList/AuthProviderList.js","constraints.js","components/SignUpDialog/SignUpDialog.js","components/SignInDialog/SignInDialog.js","components/AccountTab/AccountTab.js","components/AppearanceTab/AppearanceTab.js","components/LinksTab/LinksTab.js","components/SecurityTab/SecurityTab.js","components/SettingsDialog/SettingsDialog.js","components/DeleteAccountDialog/DeleteAccountDialog.js","components/AlertDialog/AlertDialog.js","components/DialogHost/DialogHost.js","components/App/App.js","serviceWorker.js","index.js"],"names":["firebase","apiKey","process","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","measurementId","analytics","auth","firestore","storage","avatarFileTypes","authentication","fields","Promise","resolve","reject","firstName","lastName","username","emailAddress","password","currentUser","createUserWithEmailAndPassword","then","value","user","uid","reference","collection","doc","set","logEvent","method","catch","reason","merge","console","log","signInWithEmailAndPassword","get","source","exists","providerId","provider","OAuthProvider","signInWithPopup","error","linkWithPopup","unlink","providerData","find","authProvider","signOut","sendPasswordResetEmail","avatar","includes","type","size","ref","child","put","uploadTaskSnapshot","getDownloadURL","updateProfile","photoURL","delete","update","updateEmail","updatePassword","lastPasswordChange","FieldValue","serverTimestamp","sendEmailVerification","getName","displayName","getFullName","getNameInitials","charAt","getProfileCompletion","email","emailVerified","profileCompletion","forEach","field","length","Math","floor","getSecurityRating","userData","metadata","creationTime","moment","securityRating","toDate","diff","colors","red","id","name","import","pink","purple","deepPurple","indigo","blue","lightBlue","cyan","teal","green","lightGreen","lime","yellow","amber","orange","deepOrange","brown","gray","blueGray","types","light","dark","getColor","colorId","_","camelCase","getType","typeId","defaultPrimaryColor","defaultSecondaryColor","defaultType","defaultTheme","createMuiTheme","palette","primary","secondary","primaryColor","secondaryColor","theming","isDefaultTheme","theme","createTheme","changeTheme","changePrimaryColor","changeSecondaryColor","changeType","resetTheme","LaunchScreen","Box","position","top","left","CircularProgress","Component","Bar","props","getAvatar","photoUrl","Avatar","alt","src","nameInitials","openMenu","event","anchorEl","currentTarget","setState","menu","closeMenu","handleSettingsClick","onSettingsClick","handleSignOutClick","onSignOutClick","state","this","performingAction","onSignUpClick","onSignInClick","AppBar","color","Toolbar","variant","flexGrow","Typography","IconButton","disabled","onClick","Menu","open","Boolean","onClose","MenuItem","mr","Button","defaultProps","EmptyState","classes","icon","title","description","button","className","center","gutterBottom","withStyles","transform","textAlign","convert","require","bgg","loadCollection","performFetch","response","text","xml","json","xml2json","compact","JSON","parse","items","item","gamesJsonArray","Array","from","gamesArray","gameJson","push","_attributes","objectid","_text","subtype","image","thumb","thumbnail","yearPublished","yearpublished","err","url","tries","fetch","status","paginationStyles","makeStyles","root","flexShrink","marginLeft","spacing","TablePaginationActions","useTheme","count","page","rowsPerPage","onChangePage","aria-label","direction","ceil","max","BGGBrowser","isLoading","handleChangePage","newPage","handleChangeRowsPerPage","parseInt","target","columns","label","minWidth","align","maxWidth","limit","lenth","tableWrapper","Table","stickyHeader","table","TableHead","TableRow","map","column","TableCell","key","style","TableBody","slice","game","component","scope","TablePagination","rowsPerPageOptions","colSpan","SelectProps","inputProps","native","onChangeRowsPerPage","ActionsComponent","overflowX","maxHeight","marginTop","HomeContent","emptyStateIcon","Fab","href","rel","buttonIcon","fontSize","marginRight","NotFoundContent","Link","to","Router","basename","REACT_APP_BASENAME","path","exact","AuthProviderList","onAuthProviderClick","authProviders","main","contrastText","Grid","grid","container","fullWidth","startIcon","marginBottom","constraints","presence","allowEmpty","minimum","maximum","message","emailAddressConfirmation","equality","attribute","passwordConfirmation","initialState","errors","SignUpDialog","signUp","validate","signUpWithEmailAddressAndPassword","dialogProps","code","openSnackbar","finally","signInWithAuthProvider","handleKeyPress","altKey","ctrlKey","metaKey","shiftKey","handleExited","handleEmailAddressChange","handleEmailAddressConfirmationChange","handlePasswordChange","handlePasswordConfirmationChange","Dialog","onKeyPress","onExited","DialogTitle","Hidden","xsDown","DialogContent","xs","Divider","divider","orientation","TextField","autoComplete","helperText","placeholder","required","onChange","smUp","DialogActions","margin","SignInDialog","resetPassword","signIn","showingField","avatarUrl","loadingAvatar","sentVerificationEmail","AccountTab","getNameInitialsOrIcon","personIcon","uploadAvatar","changeAvatar","removeAvatar","URL","revokeObjectURL","showField","fieldId","hideFields","callback","changeFirstName","changeLastName","changeUsername","changeEmailAddress","verifyEmailAddress","deleteAccount","changeField","handleKeyDown","handleAvatarChange","files","createObjectURL","handleFirstNameChange","handleLastNameChange","handleUsernameChange","onDeleteAccountClick","hasFirstName","hasLastName","hasUsername","dialogContent","mb","alignItems","Badge","badge","badgeContent","Tooltip","sizeSmall","small","loadingBadge","Fade","transitionDelay","in","unmountOnExit","thickness","hidden","accept","htmlFor","List","disablePadding","ListItem","ListItemIcon","autoFocus","onBlur","onKeyDown","ListItemText","ListItemSecondaryAction","clone","lastSignInTime","format","mt","paddingTop","right","width","height","cursor","minHeight","AppearanceTab","handlePrimaryColorChange","handleSecondaryColorChange","handleTypeChange","handleResetClick","FormControl","InputLabel","Select","Object","keys","LinksTab","linkAuthProvider","unlinkAuthProvider","authProviderData","identifier","phoneNumber","SecurityTab","changePassword","hasChangedPassword","tabs","selectedTab","SettingsDialog","handleTabChange","handleIndexChange","index","disableTypography","closeButton","Tabs","overflow","indicatorColor","textColor","tab","Tab","scrollButtons","onChangeIndex","display","DeleteAccountDialog","DialogContentText","AlertDialog","contentText","dismissiveAction","confirmingAction","acknowledgementAction","noTitlePadding","DialogHost","dialogs","signUpDialog","signInDialog","settingsDialog","deleteAccountDialog","signOutDialog","smDown","fullScreen","mdUp","App","openDialog","dialogId","dialog","undefined","closeDialog","autoHideDuration","snackbar","readingTime","time","closeSnackbar","clearMessage","ready","CssBaseline","Snackbar","mounted","removeAuthStateChangedObserver","onAuthStateChanged","removeReferenceListener","onSnapshot","snapshot","data","isLocalhost","window","location","hostname","match","registerValidSW","swUrl","config","navigator","serviceWorker","register","registration","onupdatefound","installingWorker","installing","onstatechange","controller","onUpdate","onSuccess","ReactDOM","render","document","getElementById","origin","addEventListener","contentType","headers","indexOf","unregister","reload","checkValidServiceWorker"],"mappings":"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","file":"static/js/main.6b96beac.chunk.js","sourcesContent":["import * as firebase from 'firebase/app';\n\nimport 'firebase/analytics';\nimport 'firebase/auth';\nimport 'firebase/firestore';\nimport 'firebase/storage';\nimport 'firebase/performance';\n\nfirebase.initializeApp({\n  apiKey: process.env.REACT_APP_FIREBASE_API_KEY,\n  authDomain: process.env.REACT_APP_FIREBASE_AUTH_DOMAIN,\n  databaseURL: process.env.REACT_APP_FIREBASE_DATABASE_URL,\n  projectId: process.env.REACT_APP_FIREBASE_PROJECT_ID,\n  storageBucket: process.env.REACT_APP_FIREBASE_STORAGE_BUCKET,\n  messagingSenderId: process.env.REACT_APP_FIREBASE_MESSAGING_SENDER_ID,\n  appId: process.env.REACT_APP_FIREBASE_APP_ID,\n  measurementId: process.env.REACT_APP_FIREBASE_MEASUREMENT_ID\n});\n\nexport default firebase;\nexport const analytics = firebase.analytics();\nexport const auth = firebase.auth();\nexport const firestore = firebase.firestore();\nexport const storage = firebase.storage();\nexport const performance = firebase.performance();\n","import firebase, { analytics, auth, firestore, storage } from '../firebase';\n\nimport moment from 'moment';\n\nconst avatarFileTypes = [\n  'image/gif',\n  'image/jpeg',\n  'image/png',\n  'image/webp',\n  'image/svg+xml'\n];\n\nconst authentication = {};\n\nauthentication.signUp = (fields) => {\n  return new Promise((resolve, reject) => {\n    if (!fields) {\n      reject();\n      return;\n    }\n\n    const firstName = fields.firstName;\n    const lastName = fields.lastName;\n    const username = fields.username;\n    const emailAddress = fields.emailAddress;\n    const password = fields.password;\n\n    if (!firstName || !lastName || !username || !emailAddress || !password) {\n      reject();\n      return;\n    }\n\n    const currentUser = auth.currentUser;\n    if (currentUser) {\n      reject();\n      return;\n    }\n\n    auth.createUserWithEmailAndPassword(emailAddress, password).then((value) => {\n      const user = value.user;\n      if (!user) {\n        reject();\n        return;\n      }\n\n      const uid = user.uid;\n      if (!uid) {\n        reject();\n        return;\n      }\n\n      const reference = firestore.collection('users').doc(uid);\n      if (!reference) {\n        reject();\n        return;\n      }\n\n      reference.set({\n        firstName: firstName,\n        lastName: lastName,\n        username: username\n      }).then((value) => {\n        analytics.logEvent('sign_up', {\n          method: 'password'\n        });\n\n        resolve(value);\n      }).catch((reason) => {\n        reject(reason);\n      });\n    }).catch((reason) => {\n      reject(reason);\n    });\n  });\n};\n\nauthentication.signUpWithEmailAddressAndPassword = (emailAddress, password) => {\n  return new Promise((resolve, reject) => {\n    if (!emailAddress || !password) {\n      reject();\n      return;\n    }\n\n    const currentUser = auth.currentUser;\n    if (currentUser) {\n      reject();\n      return;\n    }\n\n    auth.createUserWithEmailAndPassword(emailAddress, password).then((value) => {\n      const user = value.user;\n      if (!user) {\n        reject();\n        return;\n      }\n\n      const uid = user.uid;\n      if (!uid) {\n        reject();\n        return;\n      }\n\n      const reference = firestore.collection('users').doc(uid);\n      if (!reference) {\n        reject();\n        return;\n      }\n\n      reference.set({}, { merge: true }).then((value) => {\n        analytics.logEvent('sign_up', {\n          method: 'password'\n        });\n\n        resolve(value);\n      }).catch((reason) => {\n        reject(reason);\n      });\n    }).catch((reason) => {\n      reject(reason);\n    });\n  });\n};\n\nauthentication.signIn = (emailAddress, password) => {\n  return new Promise((resolve, reject) => {\n    if (!emailAddress || !password) {\n      reject();\n      return;\n    }\n\n    const currentUser = auth.currentUser;\n    if (currentUser) {\n      reject();\n      return;\n    }\n\n    console.log(`Attempting Password Sign in for ${emailAddress}`);\n\n    auth.signInWithEmailAndPassword(emailAddress, password).then((value) => {\n      const user = value.user;\n      if (!user) {\n        reject();\n        return;\n      }\n\n      const uid = user.uid;\n      if (!uid) {\n        reject();\n        return;\n      }\n\n      const reference = firestore.collection('users').doc(uid);\n      if (!reference) {\n        reject();\n        return;\n      }\n\n      reference.get({ source: 'server' }).then((value) => {\n        if (value.exists) {\n          analytics.logEvent('login', {\n            method: 'password'\n          });\n\n          resolve(user);\n        } else {\n          reference.set({}, { merge: true }).then((value) => {\n            analytics.logEvent('login', {\n              method: 'password'\n            });\n\n            resolve(user);\n          }).catch((reason) => {\n            reject(reason);\n          });\n        }\n      }).catch((reason => {\n        reject(reason);\n      }));\n    }).catch((reason) => {\n      reject(reason);\n    });\n  });\n};\n\nauthentication.signInWithAuthProvider = (providerId) => {\n  return new Promise((resolve, reject) => {\n    if (!providerId) {\n      reject();\n      return;\n    }\n\n    const provider = new firebase.auth.OAuthProvider(providerId);\n    if (!provider) {\n      reject();\n      return;\n    }\n\n    const currentUser = auth.currentUser;\n    if (currentUser) {\n      console.log('Already Logged in Current User: ', currentUser);\n      reject();\n      return;\n    }\n\n    console.log(`Attempting Provider (${providerId}) Sign in`);\n\n    auth.signInWithPopup(provider).then((value) => {\n      const user = value.user;\n      if (!user) {\n        reject();\n        return;\n      }\n\n      const uid = user.uid;\n      if (!uid) {\n        reject();\n        return;\n      }\n\n      const reference = firestore.collection('users').doc(uid);\n      if (!reference) {\n        reject();\n        return;\n      }\n\n      console.log(`Getting user database reference`);\n\n      reference.get({ source: 'server' }).then((value) => {\n        if (value.exists) {\n          analytics.logEvent('login', {\n            method: providerId\n          });\n\n          console.log(`User Record Exists`);\n\n          resolve(user);\n        } else {\n          console.log(`User Record Doesn't Exist -- Creating`);\n          reference.set({}, { merge: true }).then((value) => {\n            analytics.logEvent('login', {\n              method: providerId\n            });\n\n            resolve(user);\n          }).catch((reason) => {\n            console.error('Unale to create user record.', reason);\n            reject(reason);\n          });\n        }\n      }).catch((reason => {\n        console.error('Unale to get user record.', reason);\n        reject(reason);\n      }));\n    }).catch((reason) => {\n      reject(reason);\n    });\n  });\n};\n\nauthentication.linkAuthProvider = (providerId) => {\n  return new Promise((resolve, reject) => {\n    if (!providerId) {\n      reject();\n      return;\n    }\n\n    const provider = new firebase.auth.OAuthProvider(providerId);\n    if (!provider) {\n      reject();\n      return;\n    }\n\n    const currentUser = auth.currentUser;\n    if (!currentUser) {\n      reject();\n      return;\n    }\n\n    currentUser.linkWithPopup(provider).then((value) => {\n      analytics.logEvent('link_auth_provider', {\n        value: providerId\n      });\n\n      resolve(value);\n    }).catch((reason) => {\n      reject(reason);\n    });\n  });\n};\n\nauthentication.unlinkAuthProvider = (providerId) => {\n  return new Promise((resolve, reject) => {\n    if (!providerId) {\n      reject();\n      return;\n    }\n\n    const currentUser = auth.currentUser;\n    if (!currentUser) {\n      reject();\n      return;\n    }\n\n    currentUser.unlink(providerId).then((value) => {\n      analytics.logEvent('unlink_auth_provider', {\n        value: providerId\n      });\n\n      resolve(value);\n    }).catch((reason) => {\n      reject(reason);\n    });\n  });\n};\n\nauthentication.authProviderData = (providerId) => {\n  if (!providerId) {\n    return;\n  }\n\n  const currentUser = auth.currentUser;\n\n  if (!currentUser) {\n    return;\n  }\n\n  const providerData = currentUser.providerData;\n\n  if (!providerData) {\n    return;\n  }\n\n  return providerData.find(authProvider => authProvider.providerId === providerId);\n};\n\nauthentication.signOut = () => {\n  return new Promise((resolve, reject) => {\n    const currentUser = auth.currentUser;\n\n    if (!currentUser) {\n      reject();\n\n      return;\n    }\n\n    auth.signOut().then((value) => {\n      analytics.logEvent('sign_out');\n\n      resolve(value);\n    }).catch((reason) => {\n      reject(reason);\n    });\n  });\n};\n\nauthentication.resetPassword = (emailAddress) => {\n  return new Promise((resolve, reject) => {\n    if (!emailAddress) {\n      reject();\n\n      return;\n    }\n\n    const currentUser = auth.currentUser;\n\n    if (currentUser) {\n      reject();\n\n      return;\n    }\n\n    auth.sendPasswordResetEmail(emailAddress).then((value) => {\n      analytics.logEvent('reset_password');\n\n      resolve(value);\n    }).catch((reason) => {\n      reject(reason);\n    });\n  });\n};\n\nauthentication.changeAvatar = (avatar) => {\n  return new Promise((resolve, reject) => {\n    if (!avatar) {\n      reject();\n      return;\n    }\n\n    if (!avatarFileTypes.includes(avatar.type)) {\n      reject();\n      return;\n    }\n\n    if (avatar.size > (20 * 1024 * 1024)) {\n      reject();\n      return;\n    }\n\n    const currentUser = auth.currentUser;\n    if (!currentUser) {\n      reject();\n      return;\n    }\n\n    const uid = currentUser.uid;\n    if (!uid) {\n      reject();\n      return;\n    }\n\n    const reference = storage.ref().child('images').child('avatars').child(uid);\n    if (!reference) {\n      reject();\n      return;\n    }\n\n    reference.put(avatar).then((uploadTaskSnapshot) => {\n      reference.getDownloadURL().then((value) => {\n        currentUser.updateProfile({\n          photoURL: value\n        }).then((value) => {\n          analytics.logEvent('change_avatar');\n\n          resolve(value);\n        }).catch((reason) => {\n          reject(reason);\n        });\n      }).catch((reason) => {\n        reject(reason);\n      });\n    }).catch((reason) => {\n      reject(reason);\n    });\n  });\n};\n\nauthentication.removeAvatar = () => {\n  return new Promise((resolve, reject) => {\n    const currentUser = auth.currentUser;\n    if (!currentUser) {\n      reject();\n      return;\n    }\n\n    const uid = currentUser.uid;\n    if (!uid) {\n      reject();\n      return;\n    }\n\n    currentUser.updateProfile({\n      photoURL: null\n    }).then((value) => {\n      const reference = storage.ref().child('images').child('avatars').child(uid);\n      if (!reference) {\n        reject();\n        return;\n      }\n\n      reference.delete().then((value) => {\n        analytics.logEvent('remove_avatar');\n\n        resolve(value);\n      }).catch((reason) => {\n        reject(reason);\n      });\n    }).catch((reason) => {\n      reject(reason);\n    });\n  });\n};\n\nauthentication.changeFirstName = (firstName) => {\n  return new Promise((resolve, reject) => {\n    if (!firstName) {\n      reject();\n      return;\n    }\n\n    const currentUser = auth.currentUser;\n    if (!currentUser) {\n      reject();\n      return;\n    }\n\n    const uid = currentUser.uid;\n    if (!uid) {\n      reject();\n      return;\n    }\n\n    const reference = firestore.collection('users').doc(uid);\n    if (!reference) {\n      reject();\n      return;\n    }\n\n    reference.update({\n      firstName: firstName\n    }).then((value) => {\n      analytics.logEvent('change_first_name');\n\n      resolve(value);\n    }).catch((reason) => {\n      reject(reason);\n    });\n  });\n};\n\nauthentication.changeLastName = (lastName) => {\n  return new Promise((resolve, reject) => {\n    if (!lastName) {\n      reject();\n      return;\n    }\n\n    const currentUser = auth.currentUser;\n    if (!currentUser) {\n      reject();\n      return;\n    }\n\n    const uid = currentUser.uid;\n    if (!uid) {\n      reject();\n      return;\n    }\n\n    const reference = firestore.collection('users').doc(uid);\n    if (!reference) {\n      reject();\n      return;\n    }\n\n    reference.update({\n      lastName: lastName\n    }).then((value) => {\n      analytics.logEvent('change_last_name');\n\n      resolve(value);\n    }).catch((reason) => {\n      reject(reason);\n    });\n  });\n};\n\nauthentication.changeUsername = (username) => {\n  return new Promise((resolve, reject) => {\n    if (!username) {\n      reject();\n      return;\n    }\n\n    const currentUser = auth.currentUser;\n    if (!currentUser) {\n      reject();\n      return;\n    }\n\n    const uid = currentUser.uid;\n    if (!uid) {\n      reject();\n      return;\n    }\n\n    const reference = firestore.collection('users').doc(uid);\n    if (!reference) {\n      reject();\n      return;\n    }\n\n    reference.update({\n      username: username\n    }).then((value) => {\n      analytics.logEvent('change_username');\n\n      resolve(value);\n    }).catch((reason) => {\n      reject(reason);\n    });\n  });\n};\n\nauthentication.changeEmailAddress = (emailAddress) => {\n  return new Promise((resolve, reject) => {\n    if (!emailAddress) {\n      reject();\n      return;\n    }\n\n    const currentUser = auth.currentUser;\n    if (!currentUser) {\n      reject();\n      return;\n    }\n\n    const uid = currentUser.uid;\n    if (!uid) {\n      reject();\n      return;\n    }\n\n    currentUser.updateEmail(emailAddress).then((value) => {\n      analytics.logEvent('change_email_address');\n\n      resolve(value);\n    }).catch((reason) => {\n      reject(reason);\n    });\n  });\n};\n\nauthentication.changePassword = (password) => {\n  return new Promise((resolve, reject) => {\n    if (!password) {\n      reject();\n      return;\n    }\n\n    const currentUser = auth.currentUser;\n    if (!currentUser) {\n      reject();\n      return;\n    }\n\n    const uid = currentUser.uid;\n    if (!uid) {\n      reject();\n      return;\n    }\n\n    currentUser.updatePassword(password).then((value) => {\n      const reference = firestore.collection('users').doc(uid);\n      if (!reference) {\n        reject();\n        return;\n      }\n\n      reference.update({\n        lastPasswordChange: firebase.firestore.FieldValue.serverTimestamp()\n      }).then((value) => {\n        analytics.logEvent('change_password');\n\n        resolve(value);\n      }).catch((reason) => {\n        reject(reason);\n      });\n    }).catch((reason) => {\n      reject(reason);\n    });\n  });\n};\n\nauthentication.verifyEmailAddress = () => {\n  return new Promise((resolve, reject) => {\n    const currentUser = auth.currentUser;\n    if (!currentUser) {\n      reject();\n      return;\n    }\n\n    currentUser.sendEmailVerification().then((value) => {\n      analytics.logEvent('verify_email_address');\n\n      resolve(value);\n    }).catch((reason) => {\n      reject(reason);\n    });\n  });\n};\n\nauthentication.deleteAccount = () => {\n  return new Promise((resolve, reject) => {\n    const currentUser = auth.currentUser;\n    if (!currentUser) {\n      reject();\n      return;\n    }\n\n    currentUser.delete().then((value) => {\n      analytics.logEvent('delete_account');\n\n      resolve(value);\n    }).catch((reason) => {\n      reject(reason);\n    });\n  });\n};\n\nauthentication.user = {};\n\nauthentication.user.getName = (fields) => {\n  if (!fields) {\n    return null;\n  }\n\n  const firstName = fields.firstName;\n  const username = fields.username;\n  const displayName = fields.displayName;\n  const lastName = fields.lastName;\n\n  if (firstName) {\n    return firstName;\n  }\n\n  if (username) {\n    return username;\n  }\n\n  if (displayName) {\n    return displayName;\n  }\n\n  if (lastName) {\n    return lastName;\n  }\n\n  return null;\n};\n\nauthentication.user.getFullName = (fields) => {\n  if (!fields) {\n    return null;\n  }\n\n  const firstName = fields.firstName;\n  const lastName = fields.lastName;\n  const displayName = fields.displayName;\n\n  if (firstName && lastName) {\n    return `${firstName} ${lastName}`;\n  }\n\n  if (displayName) {\n    return displayName;\n  }\n\n  return null;\n};\n\nauthentication.user.getNameInitials = (fields) => {\n  if (!fields) {\n    return null;\n  }\n\n  const firstName = fields.firstName;\n  const lastName = fields.lastName;\n  const username = fields.username;\n  const displayName = fields.displayName;\n\n  if (firstName && lastName) {\n    return firstName.charAt(0) + lastName.charAt(0);\n  }\n\n  if (firstName) {\n    return firstName.charAt(0);\n  }\n\n  if (username) {\n    return username.charAt(0);\n  }\n\n  if (lastName) {\n    return lastName.charAt(0);\n  }\n\n  if (displayName) {\n    return displayName.charAt(0);\n  }\n\n  return null;\n};\n\nauthentication.user.getProfileCompletion = (fields) => {\n  if (!fields) {\n    return null;\n  }\n\n  fields = [\n    fields.photoURL,\n    fields.firstName,\n    fields.lastName,\n    fields.username,\n    fields.email,\n    fields.email && fields.emailVerified\n  ];\n\n  if (!fields) {\n    return null;\n  }\n\n  let profileCompletion = 0;\n\n  fields.forEach((field) => {\n    if (field) {\n      profileCompletion += 100 / fields.length;\n    }\n  });\n\n  return Math.floor(profileCompletion);\n};\n\nauthentication.user.getSecurityRating = (user, userData) => {\n  if (!user || !user.metadata) {\n    return null;\n  }\n\n  let creationTime = user.metadata.creationTime;\n  if (!creationTime) {\n    return null;\n  }\n\n  creationTime = moment(creationTime);\n\n  let securityRating = 0;\n\n  if (userData && userData.lastPasswordChange) {\n    let lastPasswordChange = userData.lastPasswordChange;\n\n    if (lastPasswordChange) {\n      lastPasswordChange = moment(lastPasswordChange.toDate());\n\n      if (creationTime.diff(lastPasswordChange, 'days') >= 365.242199) {\n        securityRating = 50;\n      } else {\n        securityRating = 100;\n      }\n    }\n  } else {\n    if (moment().diff(creationTime, 'days') >= 365.242199) {\n      securityRating = 50;\n    } else {\n      securityRating = 100;\n    }\n  }\n\n  return securityRating;\n};\n\nexport default authentication;\n","import _ from 'lodash';\n\nimport { createMuiTheme } from '@material-ui/core/styles';\n\nimport red from '@material-ui/core/colors/red';\nimport pink from '@material-ui/core/colors/pink';\nimport purple from '@material-ui/core/colors/purple';\nimport deepPurple from '@material-ui/core/colors/deepPurple';\nimport indigo from '@material-ui/core/colors/indigo';\nimport blue from '@material-ui/core/colors/blue';\nimport lightBlue from '@material-ui/core/colors/lightBlue';\nimport cyan from '@material-ui/core/colors/cyan';\nimport teal from '@material-ui/core/colors/teal';\nimport green from '@material-ui/core/colors/green';\nimport lightGreen from '@material-ui/core/colors/lightGreen';\nimport lime from '@material-ui/core/colors/lime';\nimport yellow from '@material-ui/core/colors/yellow';\nimport amber from '@material-ui/core/colors/amber';\nimport orange from '@material-ui/core/colors/orange';\nimport deepOrange from '@material-ui/core/colors/deepOrange';\nimport brown from '@material-ui/core/colors/brown';\nimport gray from '@material-ui/core/colors/grey';\nimport blueGray from '@material-ui/core/colors/blueGrey';\n\nimport firebase, { analytics, auth, firestore } from '../firebase';\n\nconst colors = {\n  red: {\n    id: 'red',\n    name: 'Red',\n    import: red\n  },\n\n  pink: {\n    id: 'pink',\n    name: 'Pink',\n    import: pink\n  },\n\n  purple: {\n    id: 'purple',\n    name: 'Purple',\n    import: purple\n  },\n\n  deepPurple: {\n    id: 'deep-purple',\n    name: 'Deep Purple',\n    import: deepPurple\n  },\n\n  indigo: {\n    id: 'indigo',\n    name: 'Indigo',\n    import: indigo\n  },\n\n  blue: {\n    id: 'blue',\n    name: 'Blue',\n    import: blue\n  },\n\n  lightBlue: {\n    id: 'light-blue',\n    name: 'Light Blue',\n    import: lightBlue\n  },\n\n  cyan: {\n    id: 'cyan',\n    name: 'Cyan',\n    import: cyan\n  },\n\n  teal: {\n    id: 'teal',\n    name: 'Teal',\n    import: teal\n  },\n\n  green: {\n    id: 'green',\n    name: 'Green',\n    import: green\n  },\n\n  lightGreen: {\n    id: 'light-green',\n    name: 'Light Green',\n    import: lightGreen\n  },\n\n  lime: {\n    id: 'lime',\n    name: 'Lime',\n    import: lime\n  },\n\n  yellow: {\n    id: 'yellow',\n    name: 'Yellow',\n    import: yellow\n  },\n\n  amber: {\n    id: 'amber',\n    name: 'Amber',\n    import: amber\n  },\n\n  orange: {\n    id: 'orange',\n    name: 'Orange',\n    import: orange\n  },\n\n  deepOrange: {\n    id: 'deep-orange',\n    name: 'Deep Orange',\n    import: deepOrange\n  },\n\n  brown: {\n    id: 'brown',\n    name: 'Brown',\n    import: brown\n  },\n\n  gray: {\n    id: 'gray',\n    name: 'Gray',\n    import: gray\n  },\n\n  blueGray: {\n    id: 'blue-gray',\n    name: 'Blue Gray',\n    import: blueGray\n  }\n};\n\nconst types = {\n  light: {\n    id: 'light',\n    name: 'Light'\n  },\n\n  dark: {\n    id: 'dark',\n    name: 'Dark'\n  }\n};\n\nconst getColor = (colorId) => {\n  if (!colorId) {\n    return null;\n  }\n\n  colorId = _.camelCase(colorId);\n\n  return colors[colorId];\n};\n\nconst getType = (typeId) => {\n  if (!typeId) {\n    return null;\n  }\n\n  return types[typeId];\n};\n\nconst defaultPrimaryColor = getColor(process.env.REACT_APP_THEME_PRIMARY_COLOR);\nconst defaultSecondaryColor = getColor(process.env.REACT_APP_THEME_SECONDARY_COLOR);\nconst defaultType = getType(process.env.REACT_APP_THEME_TYPE);\n\nconst defaultTheme = createMuiTheme({\n  palette: {\n    primary: defaultPrimaryColor.import,\n    secondary: defaultSecondaryColor.import,\n    type: defaultType.id\n  },\n\n  primaryColor: defaultPrimaryColor,\n  secondaryColor: defaultSecondaryColor,\n  type: defaultType\n});\n\nconst theming = {};\n\ntheming.colors = colors;\ntheming.types = types;\n\ntheming.defaultPrimaryColor = defaultPrimaryColor;\ntheming.defaultSecondaryColor = defaultSecondaryColor;\ntheming.defaultType = defaultType;\n\ntheming.defaultTheme = defaultTheme;\n\n/**\n * Returns whether a theme is the default theme.\n * @param theme\n * @returns {boolean}\n */\ntheming.isDefaultTheme = (theme) => {\n  if (!theme) {\n    return false;\n  }\n\n  if (theme.primaryColor.id === defaultPrimaryColor.id &&\n      theme.secondaryColor.id === defaultSecondaryColor.id &&\n      theme.type.id === defaultType.id) {\n    return true;\n  }\n\n  return false;\n};\n\n/**\n * Creates a Material-UI theme from a JSON theme object.\n * @param theme\n * @returns {null|Theme}\n */\ntheming.createTheme = (theme) => {\n  if (!theme) {\n    return null;\n  }\n\n  let primaryColor = theme.primaryColor;\n  let secondaryColor = theme.secondaryColor;\n  let type = theme.type;\n\n  if (!primaryColor || !secondaryColor || !type) {\n    return null;\n  }\n\n  primaryColor = getColor(primaryColor);\n  secondaryColor = getColor(secondaryColor);\n  type = getType(type);\n\n  if (!primaryColor || !secondaryColor || !type) {\n    return null;\n  }\n\n  theme = createMuiTheme({\n    palette: {\n      primary: primaryColor.import,\n      secondary: secondaryColor.import,\n      type: type.id\n    },\n\n    primaryColor: primaryColor,\n    secondaryColor: secondaryColor,\n    type: type\n  });\n\n  return theme;\n};\n\n/**\n * Changes the theme for the current user.\n * @param theme\n * @returns {Promise<unknown>}\n */\ntheming.changeTheme = (theme) => {\n  return new Promise((resolve, reject) => {\n    if (!theme) {\n      reject();\n\n      return;\n    }\n\n    let primaryColor = theme.primaryColor;\n    let secondaryColor = theme.secondaryColor;\n    let type = theme.type;\n\n    if (!primaryColor || !secondaryColor || !type) {\n      reject();\n\n      return;\n    }\n\n    primaryColor = getColor(primaryColor);\n    secondaryColor = getColor(secondaryColor);\n    type = getType(type);\n\n    if (!primaryColor || !secondaryColor || !type) {\n      reject();\n\n      return;\n    }\n\n    const currentUser = auth.currentUser;\n\n    if (!currentUser) {\n      reject();\n\n      return;\n    }\n\n    const uid = currentUser.uid;\n\n    if (!uid) {\n      reject();\n\n      return;\n    }\n\n    const reference = firestore.collection('users').doc(uid);\n\n    if (!reference) {\n      reject();\n\n      return;\n    }\n\n    reference.update({\n      theme: {\n        primaryColor: primaryColor.id,\n        secondaryColor: secondaryColor.id,\n        type: type.id\n      }\n    }).then((value) => {\n      analytics.logEvent('change_theme', {\n        value: {\n          primaryColor: primaryColor.id,\n          secondaryColor: secondaryColor.id,\n          type: type.id\n        }\n      });\n\n      resolve(value);\n    }).catch((reason) => {\n      reject(reason);\n    });\n  });\n};\n\n/**\n * Changes the primary color for the current user.\n * @param primaryColor\n * @returns {Promise<unknown>}\n */\ntheming.changePrimaryColor = (primaryColor) => {\n  return new Promise((resolve, reject) => {\n    if (!primaryColor) {\n      reject();\n\n      return;\n    }\n\n    primaryColor = getColor(primaryColor);\n\n    if (!primaryColor) {\n      reject();\n\n      return;\n    }\n\n    const currentUser = auth.currentUser;\n\n    if (!currentUser) {\n      reject();\n\n      return;\n    }\n\n    const uid = currentUser.uid;\n\n    if (!uid) {\n      reject();\n\n      return;\n    }\n\n    const reference = firestore.collection('users').doc(uid);\n\n    if (!reference) {\n      reject();\n\n      return;\n    }\n\n    reference.update({\n      'theme.primaryColor': primaryColor.id\n    }).then((value) => {\n      analytics.logEvent('change_primary_color', {\n        value: primaryColor.id\n      });\n\n      resolve(value);\n    }).catch((reason) => {\n      reject(reason);\n    });\n  });\n};\n\n/**\n * Changes the secondary color for the current user.\n * @param secondaryColor\n * @returns {Promise<unknown>}\n */\ntheming.changeSecondaryColor = (secondaryColor) => {\n  return new Promise((resolve, reject) => {\n    if (!secondaryColor) {\n      reject();\n\n      return;\n    }\n\n    secondaryColor = getColor(secondaryColor);\n\n    if (!secondaryColor) {\n      reject();\n\n      return;\n    }\n\n    const currentUser = auth.currentUser;\n\n    if (!currentUser) {\n      reject();\n\n      return;\n    }\n\n    const uid = currentUser.uid;\n\n    if (!uid) {\n      reject();\n\n      return;\n    }\n\n    const reference = firestore.collection('users').doc(uid);\n\n    if (!reference) {\n      reject();\n\n      return;\n    }\n\n    reference.update({\n      'theme.secondaryColor': secondaryColor.id\n    }).then((value) => {\n      analytics.logEvent('change_secondary_color', {\n        value: secondaryColor.id\n      });\n\n      resolve(value);\n    }).catch((reason) => {\n      reject(reason);\n    });\n  });\n};\n\n/**\n * Changes the type for the current user.\n * @param type\n * @returns {Promise<unknown>}\n */\ntheming.changeType = (type) => {\n  return new Promise((resolve, reject) => {\n    if (!type) {\n      reject();\n\n      return;\n    }\n\n    type = getType(type);\n\n    if (!type) {\n      reject();\n\n      return;\n    }\n\n    const currentUser = auth.currentUser;\n\n    if (!currentUser) {\n      reject();\n\n      return;\n    }\n\n    const uid = currentUser.uid;\n\n    if (!uid) {\n      reject();\n\n      return;\n    }\n\n    const reference = firestore.collection('users').doc(uid);\n\n    if (!reference) {\n      reject();\n\n      return;\n    }\n\n    reference.update({\n      'theme.type': type.id\n    }).then((value) => {\n      analytics.logEvent('change_type', {\n        value: type.id\n      });\n\n      resolve(value);\n    }).catch((reason) => {\n      reject(reason);\n    });\n  });\n};\n\n/**\n * Resets the theme for the current user.\n * @returns {Promise<unknown>}\n */\ntheming.resetTheme = () => {\n  return new Promise((resolve, reject) => {\n    const currentUser = auth.currentUser;\n\n    if (!currentUser) {\n      reject();\n\n      return;\n    }\n\n    const uid = currentUser.uid;\n\n    if (!uid) {\n      reject();\n\n      return;\n    }\n\n    const reference = firestore.collection('users').doc(uid);\n\n    if (!reference) {\n      reject();\n\n      return;\n    }\n\n    reference.update({\n      theme: firebase.firestore.FieldValue.delete()\n    }).then((value) => {\n      analytics.logEvent('reset_theme');\n\n      resolve(value);\n    }).catch((reason) => {\n      reject(reason);\n    });\n  });\n};\n\nexport default theming;\n","import React, {Component} from 'react';\n\nimport Box from '@material-ui/core/Box';\nimport CircularProgress from '@material-ui/core/CircularProgress';\n\nclass LaunchScreen extends Component {\n  render() {\n    return (\n      <Box position=\"absolute\" top=\"50%\" left=\"50%\">\n        <CircularProgress />\n      </Box>\n    );\n  }\n}\n\nLaunchScreen.propTypes = {};\n\nexport default LaunchScreen;\n","import React, { Component } from 'react';\n\nimport PropTypes from 'prop-types';\n\nimport AppBar from '@material-ui/core/AppBar';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport Typography from '@material-ui/core/Typography';\nimport Box from '@material-ui/core/Box';\nimport Button from '@material-ui/core/Button';\nimport IconButton from '@material-ui/core/IconButton';\nimport Avatar from '@material-ui/core/Avatar';\n\nimport Menu from '@material-ui/core/Menu';\nimport MenuItem from '@material-ui/core/MenuItem';\n\nimport PersonIcon from '@material-ui/icons/Person';\n\nimport authentication from '../../services/authentication';\n\nclass Bar extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      menu: {\n        anchorEl: null\n      }\n    };\n  }\n\n  getAvatar = () => {\n    const { user } = this.props;\n\n    if (!user) {\n      return null;\n    }\n\n    const photoUrl = user.photoURL;\n\n    if (photoUrl) {\n      return (<Avatar alt=\"Avatar\" src={photoUrl} />);\n    }\n\n    const { userData } = this.props;\n\n    if (!userData) {\n      return <PersonIcon />;\n    }\n\n    const nameInitials = authentication.user.getNameInitials({\n      ...user,\n      ...userData\n    });\n\n    if (nameInitials) {\n      return <Avatar alt=\"Avatar\">{nameInitials}</Avatar>;\n    }\n\n    return <PersonIcon />;\n  };\n\n  openMenu = (event) => {\n    const anchorEl = event.currentTarget;\n\n    this.setState({\n      menu: {\n        anchorEl\n      }\n    });\n  };\n\n  closeMenu = () => {\n    this.setState({\n      menu: {\n        anchorEl: null\n      }\n    });\n  };\n\n  handleSettingsClick = () => {\n    this.closeMenu();\n    this.props.onSettingsClick();\n  };\n\n  handleSignOutClick = () => {\n    this.closeMenu();\n    this.props.onSignOutClick();\n  };\n\n  render() {\n    // Properties\n    const { performingAction, user } = this.props;\n\n    // Events\n    const { onSignUpClick, onSignInClick } = this.props;\n\n    const { menu } = this.state;\n\n    return (\n      <AppBar color=\"primary\" position=\"static\">\n        <Toolbar variant=\"regular\">\n          <Box flexGrow={1}>\n            <Typography color=\"inherit\" variant=\"h6\">{process.env.REACT_APP_NAME}</Typography>\n          </Box>\n\n          {user &&\n            <>\n              <IconButton color=\"inherit\" disabled={performingAction} onClick={this.openMenu}>\n                {this.getAvatar()}\n              </IconButton>\n\n              <Menu anchorEl={menu.anchorEl} open={Boolean(menu.anchorEl)} onClose={this.closeMenu}>\n                <MenuItem disabled={performingAction} onClick={this.handleSettingsClick}>Settings</MenuItem>\n                <MenuItem disabled={performingAction} onClick={this.handleSignOutClick}>Sign out</MenuItem>\n              </Menu>\n            </>\n          }\n\n          {!user &&\n            <>\n              <Box mr={1}>\n                <Button color=\"secondary\" disabled={performingAction} variant=\"contained\" onClick={onSignUpClick}>Sign Up</Button>\n              </Box>\n\n              <Button color=\"secondary\" disabled={performingAction} variant=\"contained\" onClick={onSignInClick}>Sign In</Button>\n            </>\n          }\n        </Toolbar>\n      </AppBar>\n    );\n  }\n}\n\nBar.defaultProps = {\n  performingAction: false\n};\n\nBar.propTypes = {\n  // Properties\n  performingAction: PropTypes.bool.isRequired,\n  user: PropTypes.object,\n  userData: PropTypes.object,\n\n  // Events\n  onSettingsClick: PropTypes.func.isRequired,\n  onSignOutClick: PropTypes.func.isRequired\n};\n\nexport default Bar;\n","import React, { Component } from 'react';\n\nimport PropTypes from 'prop-types';\n\nimport { withStyles } from '@material-ui/core/styles';\n\nimport Typography from '@material-ui/core/Typography';\n\nconst styles = {\n  center: {\n    position: 'absolute',\n    top: '50%',\n    left: '50%',\n    transform: 'translate(-50%, -50%)',\n    textAlign: 'center'\n  }\n};\n\nclass EmptyState extends Component {\n  render() {\n    // Styling\n    const { classes } = this.props;\n\n    // Properties\n    const { icon, title, description, button } = this.props;\n\n    return (\n      <div className={classes.center}>\n        {icon}\n        {title && <Typography color=\"textSecondary\" variant=\"h4\">{title}</Typography>}\n        {description && <Typography color=\"textSecondary\" variant=\"subtitle1\" gutterBottom>{description}</Typography>}\n        {button}\n      </div>\n    );\n  }\n}\n\nEmptyState.propTypes = {\n  // Styling\n  classes: PropTypes.object.isRequired,\n\n  // Properties\n  icon: PropTypes.element,\n  title: PropTypes.string,\n  description: PropTypes.string,\n  button: PropTypes.element\n};\n\nexport default withStyles(styles)(EmptyState);\n","const convert = require('xml-js');\n\nconst bgg = {};\n\nconst rootPath = 'https://www.boardgamegeek.com/xmlapi2';\nconst maxTries = 3;\n\nbgg.loadCollection = username => {\n  return new Promise((resolve, reject) => {\n    if (!username) {\n      reject();\n      return;\n    }\n\n    bgg.performFetch(`${rootPath}/collection?username=${username}&subtype=boardgame&excludesubtype=boardgameexpansion&own=1`)\n      .then(response => {\n        return response.text();\n      }).then(xml => {\n        // Convert the XML to JSON\n        const json = convert.xml2json(xml, {compact: true});\n        const collection = JSON.parse(json);\n        \n        console.log('Fetched games. Example:', collection.items.item[0]);\n\n        // Conver the JSON to an array of just the data we want\n        const gamesJsonArray = Array.from(collection.items.item);\n        let gamesArray = [];\n        gamesJsonArray.forEach(gameJson => gamesArray.push({\n          id: gameJson._attributes.objectid,\n          name: gameJson.name._text,\n          type: gameJson._attributes.subtype,\n          image: gameJson.image._text,\n          thumb: gameJson.thumbnail._text,\n          yearPublished: gameJson.yearpublished._text\n        }));\n\n        console.log(\"Fetched Collection Array: \", gamesArray);\n\n        resolve(gamesArray);\n      }).catch(err => {\n        console.error('Unable to Fectch BGG Collection: ', err);\n        reject(err);\n      });\n\n  });\n};\n\nbgg.performFetch = (url, tries=0) => {\n  return new Promise((resolve, reject) => {\n    if (!url) {\n      reject();\n      return;\n    }\n\n    fetch(url).then(response => {\n      if (response.status === 200) {\n        resolve(response);\n      } else {\n        if (tries > maxTries) {\n          reject('Max Tries Exceeded');\n          return;\n        }\n        bgg.performFetch(url, tries++)\n          .then(resolve)\n          .catch(reject);\n      }\n    }).catch(err => reject(err));\n  });\n}\n\nexport default bgg;\n","import React, { Component, Fragment } from 'react';\n\nimport PropTypes from 'prop-types';\n\nimport { withStyles, makeStyles, useTheme } from '@material-ui/core/styles';\nimport Box from '@material-ui/core/Box';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableFooter from '@material-ui/core/TableFooter';\nimport TableHead from '@material-ui/core/TableHead';\nimport TablePagination from '@material-ui/core/TablePagination';\nimport TableRow from '@material-ui/core/TableRow';\nimport IconButton from '@material-ui/core/IconButton';\nimport FirstPageIcon from '@material-ui/icons/FirstPage';\nimport KeyboardArrowLeft from '@material-ui/icons/KeyboardArrowLeft';\nimport KeyboardArrowRight from '@material-ui/icons/KeyboardArrowRight';\nimport LastPageIcon from '@material-ui/icons/LastPage';\n\nimport bgg from '../../services/bgg';\n\nconst styles = theme => ({\n  center: {\n    position: 'absolute',\n    top: '50%',\n    left: '50%',\n    transform: 'translate(-50%, -50%)',\n    textAlign: 'center',\n  },\n  table: {\n    minWidth: 500,\n  },\n  tableWrapper: {\n    overflowX: 'auto',\n    maxHeight: '80vh',\n    marginTop: theme.spacing(3),\n  },\n  image: {\n    maxHeight: 75,\n  },\n});\n\nconst paginationStyles = makeStyles(theme => ({\n  root: {\n    flexShrink: 0,\n    marginLeft: theme.spacing(2.5),\n  },\n}));\n\nfunction TablePaginationActions(props) {\n  const classes = paginationStyles();\n  const theme = useTheme();\n  const { count, page, rowsPerPage, onChangePage } = props;\n\n  const handleFirstPageButtonClick = () => {\n    onChangePage(0);\n  };\n\n  const handleBackButtonClick = () => {\n    onChangePage(page - 1);\n  };\n\n  const handleNextButtonClick = () => {\n    onChangePage(page + 1);\n  };\n\n  const handleLastPageButtonClick = () => {\n    onChangePage(Math.max(0, Math.ceil(count / rowsPerPage) - 1));\n  };\n\n  return (\n    <div className={classes.root}>\n      <IconButton\n        onClick={handleFirstPageButtonClick}\n        disabled={page === 0}\n        aria-label=\"first page\"\n      >\n        {theme.direction === 'rtl' ? <LastPageIcon /> : <FirstPageIcon />}\n      </IconButton>\n      <IconButton onClick={handleBackButtonClick} disabled={page === 0} aria-label=\"previous page\">\n        {theme.direction === 'rtl' ? <KeyboardArrowRight /> : <KeyboardArrowLeft />}\n      </IconButton>\n      <IconButton\n        onClick={handleNextButtonClick}\n        disabled={page >= Math.ceil(count / rowsPerPage) - 1}\n        aria-label=\"next page\"\n      >\n        {theme.direction === 'rtl' ? <KeyboardArrowLeft /> : <KeyboardArrowRight />}\n      </IconButton>\n      <IconButton\n        onClick={handleLastPageButtonClick}\n        disabled={page >= Math.ceil(count / rowsPerPage) - 1}\n        aria-label=\"last page\"\n      >\n        {theme.direction === 'rtl' ? <FirstPageIcon /> : <LastPageIcon />}\n      </IconButton>\n    </div>\n  );\n}\n\nTablePaginationActions.propTypes = {\n  count: PropTypes.number.isRequired,\n  onChangePage: PropTypes.func.isRequired,\n  page: PropTypes.number.isRequired,\n  rowsPerPage: PropTypes.number.isRequired,\n};\n\nclass BGGBrowser extends Component {\n  state = {\n    isLoading: true,\n    collection: [],\n    page: 0,\n    rowsPerPage: 5\n  }\n\n  handleChangePage = newPage => {\n    this.setState({page: newPage});\n  };\n\n  handleChangeRowsPerPage = event => {\n    this.setState({page: 0, rowsPerPage: parseInt(event.target.value, 10)})\n  };\n\n  columns = [\n    { id: 'id', label: 'Game ID', minWidth: 100, align: 'right' },\n    { id: 'name', label: 'Name (Year)'},\n    { id: 'thumb', label: 'Image', maxWidth: 100, align: 'center' },\n    { id: 'type', label: 'Game Type', minWidth: 100 }\n  ];\n\n  render() {\n    // Styling\n    const { classes } = this.props;\n\n    // Properties\n    const { isLoading, collection, page, rowsPerPage } = this.state;\n\n    let limit = 20;\n    if (collection.lenth < limit) {\n      limit = collection.length;\n    }\n\n    return (\n      <Fragment>\n        { isLoading ? (\n          <div className={classes.center}>\n            <Box position=\"absolute\" top=\"50%\" left=\"50%\">\n              <CircularProgress />\n            </Box>\n          </div>\n        ) : (\n          <Fragment>\n            <div className={classes.tableWrapper}>\n              <Table stickyHeader \n                  className={classes.table}\n                  aria-label=\"sticky custom pagination table\">\n                <TableHead>\n                  <TableRow>\n                    {this.columns.map(column => (\n                      <TableCell\n                        key={column.id}\n                        align={column.align}\n                        style={{ minWidth: column.minWidth }}\n                      >\n                        {column.label}\n                      </TableCell>\n                    ))}\n                  </TableRow>\n                </TableHead>\n                <TableBody>\n                  {(\n                    collection.slice(page * rowsPerPage, page * rowsPerPage + rowsPerPage)\n                  ).map(game => (\n                    <TableRow key={game.id}>\n                      <TableCell align=\"right\">{game.id}</TableCell>\n                      <TableCell component=\"th\" scope=\"row\">\n                        {game.name} ({game.yearPublished})\n                      </TableCell>\n                      <TableCell align=\"center\">\n                        <img className={classes.image} src={game.thumb} alt={game.name} />\n                      </TableCell>\n                      <TableCell>{game.type}</TableCell>\n                    </TableRow>\n                  ))}\n                </TableBody>\n              </Table>\n            </div>\n            <TablePagination\n              component='div'\n              rowsPerPageOptions={[5, 10, 25, 50]}\n              colSpan={4}\n              count={collection.length}\n              rowsPerPage={rowsPerPage}\n              page={page}\n              SelectProps={{\n                inputProps: { 'aria-label': 'rows per page' },\n                native: true,\n              }}\n              onChangePage={this.handleChangePage}\n              onChangeRowsPerPage={this.handleChangeRowsPerPage}\n              ActionsComponent={TablePaginationActions}\n            />\n          </Fragment>\n        ) }\n      </Fragment>\n    );\n  }\n\n  componentDidMount() {\n    bgg.loadCollection(this.props.username).then(collection => {\n      this.setState({\n        isLoading: false,\n        collection\n      })\n    });\n  }\n}\n\nBGGBrowser.propTypes = {\n  // Properties\n  username: PropTypes.string,\n};\n\nexport default withStyles(styles)(BGGBrowser);\n","import React, { Component } from 'react';\n\nimport PropTypes from 'prop-types';\n\nimport { withStyles } from '@material-ui/core/styles';\n\nimport Fab from '@material-ui/core/Fab';\n\nimport HomeIcon from '@material-ui/icons/Home';\n\nimport GitHubCircleIcon from 'mdi-material-ui/GithubCircle';\n\nimport EmptyState from '../EmptyState';\nimport BGGBrowser from '../BGGBrowser';\n\nconst styles = (theme) => ({\n  emptyStateIcon: {\n    fontSize: theme.spacing(12)\n  },\n\n  button: {\n    marginTop: theme.spacing(1)\n  },\n\n  buttonIcon: {\n    marginRight: theme.spacing(1)\n  }\n});\n\nclass HomeContent extends Component {\n  render() {\n    // Styling\n    const { classes } = this.props;\n\n    // Properties\n    const { user, userData } = this.props;\n\n    if (user) {\n      \n      if (userData && userData.username) {\n        return (\n          <BGGBrowser username={userData.username} />\n        );\n      } else {\n        return (\n          <EmptyState\n            icon={<HomeIcon className={classes.emptyStateIcon} color=\"action\" />}\n            title=\"Home\"\n            description=\"Edit your settings and add your BGG username\"\n          />\n        );\n      }\n    }\n\n    return (\n      <EmptyState\n        title={process.env.REACT_APP_NAME}\n        description=\"I should put some description here\"\n        button={\n          <Fab className={classes.button} color=\"secondary\" href=\"https://github.com/Phoqe/react-material-ui-firebase\" rel=\"noopener noreferrer\" target=\"_blank\" variant=\"extended\">\n            <GitHubCircleIcon className={classes.buttonIcon} />\n            GitHub\n          </Fab>\n        }\n      />\n    );\n  }\n}\n\nHomeContent.propTypes = {\n  // Styling\n  classes: PropTypes.object.isRequired,\n\n  // Properties\n  user: PropTypes.object\n};\n\nexport default withStyles(styles)(HomeContent);\n","import React, { Component } from 'react';\n\nimport PropTypes from 'prop-types';\n\nimport { Link } from 'react-router-dom';\n\nimport { withStyles } from '@material-ui/core/styles';\n\nimport Fab from '@material-ui/core/Fab';\n\nimport FindIcon from '@material-ui/icons/FindInPage';\nimport HomeIcon from '@material-ui/icons/Home';\n\nimport EmptyState from '../EmptyState';\n\nconst styles = (theme) => ({\n  emptyStateIcon: {\n    fontSize: theme.spacing(12)\n  },\n\n  button: {\n    marginTop: theme.spacing(1)\n  },\n\n  buttonIcon: {\n    marginRight: theme.spacing(1)\n  }\n});\n\nclass NotFoundContent extends Component {\n  render() {\n    // Styling\n    const { classes } = this.props;\n\n    return (\n      <EmptyState\n        icon={<FindIcon className={classes.emptyStateIcon} color=\"action\" />}\n        title=\"Content Not Found\"\n        description=\"The requested URL was not found on this server\"\n        button={\n          <Fab className={classes.button} color=\"secondary\" component={Link} to=\"/\" variant=\"extended\">\n            <HomeIcon className={classes.buttonIcon} /> Go Home\n          </Fab>\n        }\n      />\n    );\n  }\n}\n\nNotFoundContent.propTypes = {\n  // Styling\n  classes: PropTypes.object.isRequired\n};\n\nexport default withStyles(styles)(NotFoundContent);\n","import React, { Component } from 'react'\n\nimport PropTypes from 'prop-types';\n\nimport { BrowserRouter, Switch, Route } from \"react-router-dom\";\n\nimport HomeContent from '../HomeContent';\nimport NotFoundContent from '../NotFoundContent';\n\nclass Router extends Component {\n  render() {\n    // Properties\n    const { user, userData } = this.props;\n\n    return (\n      <BrowserRouter basename={process.env.REACT_APP_BASENAME}>\n        <Switch>\n          <Route path=\"/\" exact>\n            <HomeContent user={user} userData={userData} />\n          </Route>\n\n          <Route>\n            <NotFoundContent />\n          </Route>\n        </Switch>\n      </BrowserRouter>\n    )\n  }\n}\n\nRouter.propTypes = {\n  // Properties\n  user: PropTypes.object\n};\n\nexport default Router;\n","import React, { Component } from 'react';\n\nimport PropTypes from 'prop-types';\n\nimport { createMuiTheme, withStyles, MuiThemeProvider } from '@material-ui/core/styles';\n\nimport Grid from '@material-ui/core/Grid';\nimport Button from '@material-ui/core/Button';\n\nimport FacebookBoxIcon from 'mdi-material-ui/FacebookBox';\nimport GitHubCircleIcon from 'mdi-material-ui/GithubCircle';\nimport GoogleIcon from 'mdi-material-ui/Google';\nimport MicrosoftIcon from 'mdi-material-ui/Microsoft';\nimport TwitterIcon from 'mdi-material-ui/Twitter';\nimport YahooIcon from 'mdi-material-ui/Yahoo';\n\nconst styles = (theme) => ({\n  grid: {\n    marginBottom: theme.spacing(2)\n  }\n});\n\nclass AuthProviderList extends Component {\n  render() {\n    // Styling\n    const { classes } = this.props;\n\n    // Properties\n    const { gutterBottom, performingAction } = this.props;\n\n    // Events\n    const { onAuthProviderClick } = this.props;\n\n    const authProviders = [\n      // {\n      //   providerId: 'facebook.com',\n      //   theme: createMuiTheme({\n      //     palette: {\n      //       primary: {\n      //         main: '#3c5a99',\n      //         contrastText: '#ffffff'\n      //       }\n      //     }\n      //   }),\n      //   icon: <FacebookBoxIcon />,\n      //   name: 'Facebook'\n      // },\n      // {\n      //   providerId: 'github.com',\n      //   theme: createMuiTheme({\n      //     palette: {\n      //       primary: {\n      //         main: '#24292e',\n      //         contrastText: '#ffffff'\n      //       }\n      //     }\n      //   }),\n      //   icon: <GitHubCircleIcon />,\n      //   name: 'GitHub'\n      // },\n      {\n        providerId: 'google.com',\n        theme: createMuiTheme({\n          palette: {\n            primary: {\n              main: '#4285f4',\n              contrastText: '#ffffff'\n            }\n          }\n        }),\n        icon: <GoogleIcon />,\n        name: 'Google'\n      },\n      // {\n      //   providerId: 'microsoft.com',\n      //   theme: createMuiTheme({\n      //     palette: {\n      //       primary: {\n      //         main: '#f65314',\n      //         contrastText: '#ffffff'\n      //       }\n      //     }\n      //   }),\n      //   icon: <MicrosoftIcon />,\n      //   name: 'Microsoft'\n      // },\n      // {\n      //   providerId: 'twitter.com',\n      //   theme: createMuiTheme({\n      //     palette: {\n      //       primary: {\n      //         main: '#1da1f2',\n      //         contrastText: '#ffffff'\n      //       }\n      //     }\n      //   }),\n      //   icon: <TwitterIcon />,\n      //   name: 'Twitter'\n      // },\n      // {\n      //   providerId: 'yahoo.com',\n      //   theme: createMuiTheme({\n      //     palette: {\n      //       primary: {\n      //         main: '#410093',\n      //         contrastText: '#ffffff'\n      //       }\n      //     }\n      //   }),\n      //   icon: <YahooIcon />,\n      //   name: 'Yahoo'\n      // }\n    ];\n\n    if (gutterBottom) {\n      return (\n        <Grid className={classes.grid} container direction=\"column\" spacing={1}>\n          {authProviders.map((authProvider) => {\n            return (\n              <Grid key={authProvider.providerId} item>\n                <MuiThemeProvider theme={authProvider.theme}>\n                  <Button\n                    color=\"primary\"\n                    disabled={performingAction}\n                    fullWidth\n                    startIcon={authProvider.icon}\n                    variant=\"contained\"\n                    onClick={() => onAuthProviderClick(authProvider.providerId)}>\n                    {authProvider.name}\n                  </Button>\n                </MuiThemeProvider>\n              </Grid>\n            );\n          })}\n        </Grid>\n      );\n    }\n\n    return (\n      <Grid container direction=\"column\" spacing={1}>\n        {authProviders.map((authProvider) => {\n          return (\n            <Grid key={authProvider.providerId} item>\n              <MuiThemeProvider theme={authProvider.theme}>\n                <Button\n                  color=\"primary\"\n                  disabled={performingAction}\n                  fullWidth\n                  startIcon={authProvider.icon}\n                  variant=\"contained\"\n                  onClick={() => onAuthProviderClick(authProvider.providerId)}>\n                  {authProvider.name}\n                </Button>\n              </MuiThemeProvider>\n            </Grid>\n          );\n        })}\n      </Grid>\n    );\n  }\n}\n\nAuthProviderList.defaultProps = {\n  gutterBottom: false,\n  performingAction: false\n};\n\nAuthProviderList.propTypes = {\n  // Styling\n  classes: PropTypes.object.isRequired,\n\n  // Properties\n  gutterBottom: PropTypes.bool,\n  performingAction: PropTypes.bool,\n\n  // Events\n  onAuthProviderClick: PropTypes.func.isRequired\n};\n\nexport default withStyles(styles)(AuthProviderList);\n","const constraints = {\n  firstName: {\n    presence: {\n      allowEmpty: false\n    },\n\n    type: 'string'\n  },\n\n  lastName: {\n    presence: {\n      allowEmpty: false\n    },\n\n    type: 'string'\n  },\n\n  username: {\n    length: {\n      minimum: 2,\n      maximum: 20\n    },\n\n    presence: {\n      allowEmpty: false\n    },\n\n    type: 'string'\n  },\n\n  emailAddress: {\n    email: {\n      message: '^E-mail address is invalid'\n    },\n\n    presence: {\n      allowEmpty: false\n    },\n\n    type: 'string'\n  },\n\n  emailAddressConfirmation: {\n    email: {\n      message: '^E-mail address confirmation is invalid'\n    },\n\n    equality: {\n      attribute: 'emailAddress',\n      message: '^E-mail address confirmation is not equal to e-mail address'\n    },\n\n    presence: {\n      allowEmpty: false\n    },\n\n    type: 'string'\n  },\n\n  password: {\n    length: {\n      minimum: 6\n    },\n\n    presence: {\n      allowEmpty: false\n    },\n\n    type: 'string'\n  },\n\n  passwordConfirmation: {\n    equality: 'password',\n\n    length: {\n      minimum: 6\n    },\n\n    presence: {\n      allowEmpty: false\n    },\n\n    type: 'string'\n  },\n};\n\nexport default constraints;","import React, { Component } from 'react';\n\nimport PropTypes from 'prop-types';\n\nimport validate from 'validate.js';\n\nimport { withStyles } from '@material-ui/core/styles';\n\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogActions from '@material-ui/core/DialogActions';\n\nimport Hidden from '@material-ui/core/Hidden';\nimport Grid from '@material-ui/core/Grid';\nimport Button from '@material-ui/core/Button';\nimport Divider from '@material-ui/core/Divider';\nimport TextField from '@material-ui/core/TextField';\n\nimport AuthProviderList from '../AuthProviderList';\n\nimport constraints from '../../constraints';\nimport authentication from '../../services/authentication';\n\nconst styles = (theme) => ({\n  icon: {\n    marginRight: theme.spacing(0.5)\n  },\n\n  divider: {\n    margin: 'auto'\n  },\n\n  grid: {\n    marginBottom: theme.spacing(2)\n  }\n});\n\nconst initialState = {\n  performingAction: false,\n\n  emailAddress: '',\n  emailAddressConfirmation: '',\n  password: '',\n  passwordConfirmation: '',\n\n  errors: null\n};\n\nclass SignUpDialog extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = initialState;\n  }\n\n  signUp = () => {\n    const {\n      emailAddress,\n      emailAddressConfirmation,\n      password,\n      passwordConfirmation\n    } = this.state;\n\n    const errors = validate({\n      emailAddress: emailAddress,\n      emailAddressConfirmation: emailAddressConfirmation,\n      password: password,\n      passwordConfirmation: passwordConfirmation\n    }, {\n      emailAddress: constraints.emailAddress,\n      emailAddressConfirmation: constraints.emailAddressConfirmation,\n      password: constraints.password,\n      passwordConfirmation: constraints.passwordConfirmation\n    });\n\n    if (errors) {\n      this.setState({\n        errors: errors\n      });\n    } else {\n      this.setState({\n        performingAction: true,\n\n        errors: null\n      }, () => {\n        authentication.signUpWithEmailAddressAndPassword(emailAddress, password).then((user) => {\n          this.props.dialogProps.onClose();\n        }).catch((reason) => {\n          const code = reason.code;\n          const message = reason.message;\n\n          switch (code) {\n            case 'auth/email-already-in-use':\n            case 'auth/invalid-email':\n            case 'auth/operation-not-allowed':\n            case 'auth/weak-password':\n              this.props.openSnackbar(message);\n              return;\n\n            default:\n              this.props.openSnackbar(message);\n              return;\n          }\n        }).finally(() => {\n          this.setState({\n            performingAction: false\n          });\n        });\n      });\n    }\n  };\n\n  signInWithAuthProvider = (providerId) => {\n    this.setState({\n      performingAction: true\n    }, () => {\n      authentication.signInWithAuthProvider(providerId).then((value) => {\n        this.props.dialogProps.onClose(() => {\n          const user = value.user;\n          const displayName = user.displayName;\n          const emailAddress = user.email;\n\n          this.props.openSnackbar(`Signed in as ${displayName || emailAddress}`);\n        });\n      }).catch((reason) => {\n        const code = reason.code;\n        const message = reason.message;\n\n        switch (code) {\n          case 'auth/account-exists-with-different-credential':\n          case 'auth/auth-domain-config-required':\n          case 'auth/cancelled-popup-request':\n          case 'auth/operation-not-allowed':\n          case 'auth/operation-not-supported-in-this-environment':\n          case 'auth/popup-blocked':\n          case 'auth/popup-closed-by-user':\n          case 'auth/unauthorized-domain':\n            this.props.openSnackbar(message);\n            return;\n\n          default:\n            this.props.openSnackbar(message);\n            return;\n        }\n      }).finally(() => {\n        this.setState({\n          performingAction: false\n        });\n      });\n    });\n  };\n\n  handleKeyPress = (event) => {\n    const {\n      emailAddress,\n      emailAddressConfirmation,\n      password,\n      passwordConfirmation\n    } = this.state;\n\n    if (!emailAddress ||\n      !emailAddressConfirmation ||\n      !password ||\n      !passwordConfirmation) {\n      return;\n    }\n\n    const key = event.key;\n\n    if (event.altKey || event.ctrlKey || event.metaKey || event.shiftKey) {\n      return;\n    }\n\n    if (key === 'Enter') {\n      this.signUp();\n    }\n  };\n\n  handleExited = () => {\n    this.setState(initialState);\n  };\n\n  handleEmailAddressChange = (event) => {\n    const emailAddress = event.target.value;\n\n    this.setState({\n      emailAddress: emailAddress\n    });\n  };\n\n  handleEmailAddressConfirmationChange = (event) => {\n    const emailAddressConfirmation = event.target.value;\n\n    this.setState({\n      emailAddressConfirmation: emailAddressConfirmation\n    });\n  };\n\n  handlePasswordChange = (event) => {\n    const password = event.target.value;\n\n    this.setState({\n      password: password\n    });\n  };\n\n  handlePasswordConfirmationChange = (event) => {\n    const passwordConfirmation = event.target.value;\n\n    this.setState({\n      passwordConfirmation: passwordConfirmation\n    });\n  };\n\n  render() {\n    // Styling\n    const { classes } = this.props;\n\n    // Dialog Properties\n    const { dialogProps } = this.props;\n\n    const {\n      performingAction,\n\n      emailAddress,\n      emailAddressConfirmation,\n      password,\n      passwordConfirmation,\n\n      errors\n    } = this.state;\n\n    return (\n      <Dialog fullWidth maxWidth=\"sm\" {...dialogProps} onKeyPress={this.handleKeyPress} onExited={this.handleExited}>\n        <DialogTitle>\n          Sign up for an account\n        </DialogTitle>\n\n        <Hidden xsDown>\n          <DialogContent>\n            <Grid container direction=\"row\">\n              <Grid item xs={4}>\n                <AuthProviderList\n                  performingAction={performingAction}\n\n                  onAuthProviderClick={this.signInWithAuthProvider}\n                />\n              </Grid>\n\n              <Grid item xs={1}>\n                <Divider className={classes.divider} orientation=\"vertical\" />\n              </Grid>\n\n              <Grid item xs={7}>\n                <Grid container direction=\"column\" spacing={2}>\n                  <Grid item xs>\n                    <TextField\n                      autoComplete=\"email\"\n                      disabled={performingAction}\n                      error={!!(errors && errors.emailAddress)}\n                      fullWidth\n                      helperText={(errors && errors.emailAddress) ? errors.emailAddress[0] : ''}\n                      label=\"E-mail address\"\n                      placeholder=\"john@doe.com\"\n                      required\n                      type=\"email\"\n                      value={emailAddress}\n                      variant=\"outlined\"\n\n                      onChange={this.handleEmailAddressChange}\n                    />\n                  </Grid>\n\n                  <Grid item xs>\n                    <TextField\n                      autoComplete=\"email\"\n                      disabled={performingAction}\n                      error={!!(errors && errors.emailAddressConfirmation)}\n                      fullWidth\n                      helperText={(errors && errors.emailAddressConfirmation) ? errors.emailAddressConfirmation[0] : ''}\n                      label=\"E-mail address confirmation\"\n                      placeholder=\"john@doe.com\"\n                      required\n                      type=\"email\"\n                      value={emailAddressConfirmation}\n                      variant=\"outlined\"\n\n                      onChange={this.handleEmailAddressConfirmationChange}\n                    />\n                  </Grid>\n\n                  <Grid item xs>\n                    <TextField\n                      autoComplete=\"new-password\"\n                      disabled={performingAction}\n                      error={!!(errors && errors.password)}\n                      fullWidth\n                      helperText={(errors && errors.password) ? errors.password[0] : ''}\n                      label=\"Password\"\n                      placeholder=\"&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;\"\n                      required\n                      type=\"password\"\n                      value={password}\n                      variant=\"outlined\"\n\n                      onChange={this.handlePasswordChange}\n                    />\n                  </Grid>\n\n                  <Grid item xs>\n                    <TextField\n                      autoComplete=\"password\"\n                      disabled={performingAction}\n                      error={!!(errors && errors.passwordConfirmation)}\n                      fullWidth\n                      helperText={(errors && errors.passwordConfirmation) ? errors.passwordConfirmation[0] : ''}\n                      label=\"Password confirmation\"\n                      placeholder=\"&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;\"\n                      required\n                      type=\"password\"\n                      value={passwordConfirmation}\n                      variant=\"outlined\"\n\n                      onChange={this.handlePasswordConfirmationChange}\n                    />\n                  </Grid>\n                </Grid>\n              </Grid>\n            </Grid>\n          </DialogContent>\n        </Hidden>\n\n        <Hidden smUp>\n          <DialogContent>\n            <AuthProviderList\n              gutterBottom\n              performingAction={performingAction}\n\n              onAuthProviderClick={this.signInWithAuthProvider}\n            />\n\n            <Grid container direction=\"column\" spacing={2}>\n              <Grid item xs>\n                <TextField\n                  autoComplete=\"email\"\n                  disabled={performingAction}\n                  error={!!(errors && errors.emailAddress)}\n                  fullWidth\n                  helperText={(errors && errors.emailAddress) ? errors.emailAddress[0] : ''}\n                  label=\"E-mail address\"\n                  placeholder=\"john@doe.com\"\n                  required\n                  type=\"email\"\n                  value={emailAddress}\n                  variant=\"outlined\"\n\n                  onChange={this.handleEmailAddressChange}\n                />\n              </Grid>\n\n              <Grid item xs>\n                <TextField\n                  autoComplete=\"email\"\n                  disabled={performingAction}\n                  error={!!(errors && errors.emailAddressConfirmation)}\n                  fullWidth\n                  helperText={(errors && errors.emailAddressConfirmation) ? errors.emailAddressConfirmation[0] : ''}\n                  label=\"E-mail address confirmation\"\n                  placeholder=\"john@doe.com\"\n                  required\n                  type=\"email\"\n                  value={emailAddressConfirmation}\n                  variant=\"outlined\"\n\n                  onChange={this.handleEmailAddressConfirmationChange}\n                />\n              </Grid>\n\n              <Grid item xs>\n                <TextField\n                  autoComplete=\"new-password\"\n                  disabled={performingAction}\n                  error={!!(errors && errors.password)}\n                  fullWidth\n                  helperText={(errors && errors.password) ? errors.password[0] : ''}\n                  label=\"Password\"\n                  placeholder=\"&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;\"\n                  required\n                  type=\"password\"\n                  value={password}\n                  variant=\"outlined\"\n\n                  onChange={this.handlePasswordChange}\n                />\n              </Grid>\n\n              <Grid item xs>\n                <TextField\n                  autoComplete=\"password\"\n                  disabled={performingAction}\n                  error={!!(errors && errors.passwordConfirmation)}\n                  fullWidth\n                  helperText={(errors && errors.passwordConfirmation) ? errors.passwordConfirmation[0] : ''}\n                  label=\"Password confirmation\"\n                  placeholder=\"&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;\"\n                  required\n                  type=\"password\"\n                  value={passwordConfirmation}\n                  variant=\"outlined\"\n\n                  onChange={this.handlePasswordConfirmationChange}\n                />\n              </Grid>\n            </Grid>\n          </DialogContent>\n        </Hidden>\n\n        <DialogActions>\n          <Button color=\"primary\" onClick={dialogProps.onClose}>Cancel</Button>\n\n          <Button\n            color=\"primary\"\n            disabled={\n              !emailAddress ||\n              !emailAddressConfirmation ||\n              !password ||\n              !passwordConfirmation ||\n              performingAction\n            }\n            variant=\"contained\"\n\n            onClick={this.signUp}>\n            Sign up\n          </Button>\n        </DialogActions>\n      </Dialog>\n    );\n  }\n}\n\nSignUpDialog.propTypes = {\n  // Styling\n  classes: PropTypes.object.isRequired,\n\n  // Dialog Properties\n  dialogProps: PropTypes.object.isRequired,\n\n  // Custom Functions\n  openSnackbar: PropTypes.func.isRequired\n};\n\nexport default withStyles(styles)(SignUpDialog);\n","import React, { Component } from 'react';\n\nimport PropTypes from 'prop-types';\n\nimport validate from 'validate.js';\n\nimport { withStyles } from '@material-ui/core/styles';\n\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogActions from '@material-ui/core/DialogActions';\n\nimport Hidden from '@material-ui/core/Hidden';\nimport Grid from '@material-ui/core/Grid';\nimport Button from '@material-ui/core/Button';\nimport Divider from '@material-ui/core/Divider';\nimport TextField from '@material-ui/core/TextField';\n\nimport AuthProviderList from '../AuthProviderList';\n\nimport constraints from '../../constraints';\nimport authentication from '../../services/authentication';\n\nconst styles = (theme) => ({\n  icon: {\n    marginRight: theme.spacing(0.5)\n  },\n\n  divider: {\n    margin: 'auto'\n  },\n\n  grid: {\n    marginBottom: theme.spacing(2)\n  }\n});\n\nconst initialState = {\n  performingAction: false,\n\n  emailAddress: '',\n  password: '',\n\n  errors: null\n};\n\nclass SignInDialog extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = initialState;\n  }\n\n  resetPassword = () => {\n    const { emailAddress } = this.state;\n\n    const errors = validate({\n      emailAddress: emailAddress\n    }, {\n      emailAddress: constraints.emailAddress\n    });\n\n    if (errors) {\n      this.setState({\n        errors: errors\n      });\n    } else {\n      this.setState({\n        errors: null\n      }, () => {\n        this.setState({\n          performingAction: true\n        }, () => {\n          authentication.resetPassword(emailAddress).then((value) => {\n            this.props.openSnackbar(`Sent password reset e-mail to ${emailAddress}`);\n          }).catch((reason) => {\n            const code = reason.code;\n            const message = reason.message;\n\n            switch (code) {\n              case 'auth/invalid-email':\n              case 'auth/missing-android-pkg-name':\n              case 'auth/missing-continue-uri':\n              case 'auth/missing-ios-bundle-id':\n              case 'auth/invalid-continue-uri':\n              case 'auth/unauthorized-continue-uri':\n              case 'auth/user-not-found':\n                this.props.openSnackbar(message);\n                return;\n\n              default:\n                this.props.openSnackbar(message);\n                return;\n            }\n          }).finally(() => {\n            this.setState({\n              performingAction: false\n            });\n          });\n        });\n      });\n    }\n  };\n\n  signIn = () => {\n    const { emailAddress, password } = this.state;\n\n    const errors = validate({\n      emailAddress: emailAddress,\n      password: password\n    }, {\n      emailAddress: constraints.emailAddress,\n      password: constraints.password\n    });\n\n    if (errors) {\n      this.setState({\n        errors: errors\n      });\n    } else {\n      this.setState({\n        performingAction: true,\n\n        errors: null\n      }, () => {\n        authentication.signIn(emailAddress, password).then((user) => {\n          this.props.dialogProps.onClose(() => {\n            const displayName = user.displayName;\n            const emailAddress = user.email;\n\n            this.props.openSnackbar(`Signed in as ${displayName || emailAddress}`);\n          });\n        }).catch((reason) => {\n          const code = reason.code;\n          const message = reason.message;\n\n          switch (code) {\n            case 'auth/invalid-email':\n            case 'auth/user-disabled':\n            case 'auth/user-not-found':\n            case 'auth/wrong-password':\n              this.props.openSnackbar(message);\n              return;\n\n            default:\n              this.props.openSnackbar(message);\n              return;\n          }\n        }).finally(() => {\n          this.setState({\n            performingAction: false\n          });\n        });\n      });\n    }\n  };\n\n  signInWithAuthProvider = (providerId) => {\n    this.setState({\n      performingAction: true\n    }, () => {\n      authentication.signInWithAuthProvider(providerId).then((user) => {\n        this.props.dialogProps.onClose(() => {\n          const displayName = user.displayName;\n          const emailAddress = user.email;\n\n          this.props.openSnackbar(`Signed in as ${displayName || emailAddress}`);\n        });\n      }).catch((reason) => {\n        let code = 'auth/unkown';\n        let message = 'Unknown Auth Error';\n        if (reason) {\n          code = reason.code;\n          message = reason.message;\n        }\n        \n        switch (code) {\n          case 'auth/account-exists-with-different-credential':\n          case 'auth/auth-domain-config-required':\n          case 'auth/cancelled-popup-request':\n          case 'auth/operation-not-allowed':\n          case 'auth/operation-not-supported-in-this-environment':\n          case 'auth/popup-blocked':\n          case 'auth/popup-closed-by-user':\n          case 'auth/unauthorized-domain':\n            this.props.openSnackbar(message);\n            return;\n\n          default:\n            this.props.openSnackbar(message);\n            return;\n        }\n      }).finally(() => {\n        this.setState({\n          performingAction: false\n        });\n      });\n    });\n  };\n\n  handleKeyPress = (event) => {\n    const { emailAddress, password } = this.state;\n\n    if (!emailAddress || !password) {\n      return;\n    }\n\n    const key = event.key;\n\n    if (event.altKey || event.ctrlKey || event.metaKey || event.shiftKey) {\n      return;\n    }\n\n    if (key === 'Enter') {\n      this.signIn();\n    }\n  };\n\n  handleExited = () => {\n    this.setState(initialState);\n  };\n\n  handleEmailAddressChange = (event) => {\n    const emailAddress = event.target.value;\n\n    this.setState({\n      emailAddress: emailAddress\n    });\n  };\n\n  handlePasswordChange = (event) => {\n    const password = event.target.value;\n\n    this.setState({\n      password: password\n    });\n  };\n\n  render() {\n    // Styling\n    const { classes } = this.props;\n\n    // Dialog Properties\n    const { dialogProps } = this.props;\n\n    const {\n      performingAction,\n\n      emailAddress,\n      password,\n\n      errors\n    } = this.state;\n\n    return (\n      <Dialog fullWidth maxWidth=\"sm\" {...dialogProps} onKeyPress={this.handleKeyPress} onExited={this.handleExited}>\n        <DialogTitle>\n          Sign in to your account\n        </DialogTitle>\n\n        <DialogContent>\n          <Hidden xsDown>\n            <Grid container direction=\"row\">\n              <Grid item xs={4}>\n                <AuthProviderList\n                  performingAction={performingAction}\n\n                  onAuthProviderClick={this.signInWithAuthProvider}\n                />\n              </Grid>\n\n              <Grid item xs={1}>\n                <Divider className={classes.divider} orientation=\"vertical\" />\n              </Grid>\n\n              <Grid item xs={7}>\n                <Grid container direction=\"column\" spacing={2}>\n                  <Grid item xs>\n                    <TextField\n                      autoComplete=\"email\"\n                      disabled={performingAction}\n                      error={!!(errors && errors.emailAddress)}\n                      fullWidth\n                      helperText={(errors && errors.emailAddress) ? errors.emailAddress[0] : ''}\n                      label=\"E-mail address\"\n                      placeholder=\"john@doe.com\"\n                      required\n                      type=\"email\"\n                      value={emailAddress}\n                      variant=\"outlined\"\n\n                      onChange={this.handleEmailAddressChange}\n                    />\n                  </Grid>\n\n                  <Grid item xs>\n                    <TextField\n                      autoComplete=\"current-password\"\n                      disabled={performingAction}\n                      error={!!(errors && errors.password)}\n                      fullWidth\n                      helperText={(errors && errors.password) ? errors.password[0] : ''}\n                      label=\"Password\"\n                      placeholder=\"&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;\"\n                      required\n                      type=\"password\"\n                      value={password}\n                      variant=\"outlined\"\n\n                      onChange={this.handlePasswordChange}\n                    />\n                  </Grid>\n                </Grid>\n              </Grid>\n            </Grid>\n          </Hidden>\n\n          <Hidden smUp>\n            <AuthProviderList\n              gutterBottom\n              performingAction={performingAction}\n\n              onAuthProviderClick={this.signInWithAuthProvider}\n            />\n\n            <Grid container direction=\"column\" spacing={2}>\n              <Grid item xs>\n                <TextField\n                  autoComplete=\"email\"\n                  disabled={performingAction}\n                  error={!!(errors && errors.emailAddress)}\n                  fullWidth\n                  helperText={(errors && errors.emailAddress) ? errors.emailAddress[0] : ''}\n                  label=\"E-mail address\"\n                  placeholder=\"john@doe.com\"\n                  required\n                  type=\"email\"\n                  value={emailAddress}\n                  variant=\"outlined\"\n\n                  onChange={this.handleEmailAddressChange}\n                />\n              </Grid>\n\n              <Grid item xs>\n                <TextField\n                  autoComplete=\"current-password\"\n                  disabled={performingAction}\n                  error={!!(errors && errors.password)}\n                  fullWidth\n                  helperText={(errors && errors.password) ? errors.password[0] : ''}\n                  label=\"Password\"\n                  placeholder=\"&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;\"\n                  required\n                  type=\"password\"\n                  value={password}\n                  variant=\"outlined\"\n\n                  onChange={this.handlePasswordChange}\n                />\n              </Grid>\n            </Grid>\n          </Hidden>\n        </DialogContent>\n\n        <DialogActions>\n          <Button color=\"primary\" onClick={dialogProps.onClose}>Cancel</Button>\n\n          <Button\n            color=\"primary\"\n            disabled={!emailAddress || performingAction}\n            variant=\"outlined\"\n\n            onClick={this.resetPassword}>\n            Reset password\n          </Button>\n\n          <Button\n            color=\"primary\"\n            disabled={(!emailAddress || !password) || performingAction}\n            variant=\"contained\"\n\n            onClick={this.signIn}>\n            Sign in\n          </Button>\n        </DialogActions>\n      </Dialog>\n    );\n  }\n}\n\nSignInDialog.propTypes = {\n  // Styling\n  classes: PropTypes.object.isRequired,\n\n  // Dialog Properties\n  dialogProps: PropTypes.object.isRequired,\n\n  // Custom Functions\n  openSnackbar: PropTypes.func.isRequired\n};\n\nexport default withStyles(styles)(SignInDialog);\n","import React, { Component } from 'react';\n\nimport PropTypes from 'prop-types';\n\nimport validate from 'validate.js';\nimport moment from 'moment';\n\nimport { withStyles } from '@material-ui/core/styles';\n\nimport DialogContent from '@material-ui/core/DialogContent';\nimport Grid from '@material-ui/core/Grid';\nimport Typography from '@material-ui/core/Typography';\nimport Box from '@material-ui/core/Box';\nimport Fade from '@material-ui/core/Fade';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport Badge from '@material-ui/core/Badge';\nimport Avatar from '@material-ui/core/Avatar';\nimport Fab from '@material-ui/core/Fab';\nimport Button from '@material-ui/core/Button';\n\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport ListItemSecondaryAction from '@material-ui/core/ListItemSecondaryAction';\n\nimport Hidden from '@material-ui/core/Hidden';\nimport TextField from '@material-ui/core/TextField';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport IconButton from '@material-ui/core/IconButton';\nimport Divider from '@material-ui/core/Divider';\n\nimport CloseIcon from '@material-ui/icons/Close';\nimport PhotoIcon from '@material-ui/icons/Photo';\nimport CloudUploadIcon from '@material-ui/icons/CloudUpload';\nimport PersonIcon from '@material-ui/icons/Person';\nimport EditIcon from '@material-ui/icons/Edit';\nimport PersonOutlineIcon from '@material-ui/icons/PersonOutline';\nimport EmailIcon from '@material-ui/icons/Email';\nimport WarningIcon from '@material-ui/icons/Warning';\nimport CheckIcon from '@material-ui/icons/Check';\nimport AccessTimeIcon from '@material-ui/icons/AccessTime';\nimport DeleteForeverIcon from '@material-ui/icons/DeleteForever';\n\nimport constraints from '../../constraints';\nimport authentication from '../../services/authentication';\n\nconst styles = (theme) => ({\n  dialogContent: {\n    paddingTop: theme.spacing(2)\n  },\n\n  badge: {\n    top: theme.spacing(2),\n    right: -theme.spacing(2)\n  },\n\n  loadingBadge: {\n    top: '50%',\n    right: '50%'\n  },\n\n  avatar: {\n    marginRight: 'auto',\n    marginLeft: 'auto',\n\n    width: theme.spacing(14),\n    height: theme.spacing(14)\n  },\n\n  nameInitials: {\n    cursor: 'default'\n  },\n\n  personIcon: {\n    fontSize: theme.spacing(7)\n  },\n\n  small: {\n    width: theme.spacing(4),\n    height: theme.spacing(4),\n\n    minHeight: 'initial'\n  }\n});\n\nconst initialState = {\n  profileCompletion: 0,\n  securityRating: 0,\n\n  showingField: '',\n\n  avatar: null,\n  avatarUrl: '',\n  firstName: '',\n  lastName: '',\n  username: '',\n  emailAddress: '',\n\n  performingAction: false,\n  loadingAvatar: false,\n  sentVerificationEmail: false,\n\n  errors: null\n};\n\nclass AccountTab extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = initialState;\n  }\n\n  getNameInitialsOrIcon = () => {\n    const { user } = this.props;\n\n    if (!user) {\n      return null;\n    }\n\n    const { classes, userData } = this.props;\n\n    if (!userData) {\n      return <PersonIcon className={classes.personIcon} />;\n    }\n\n    const nameInitials = authentication.user.getNameInitials({\n      ...user,\n      ...userData\n    });\n\n    if (nameInitials) {\n      return nameInitials;\n    }\n\n    return <PersonIcon className={classes.personIcon} />;\n  };\n\n  uploadAvatar = () => {\n    const { avatar } = this.state;\n\n    if (!avatar) {\n      return;\n    }\n\n    this.setState({\n      performingAction: true,\n      loadingAvatar: true\n    }, () => {\n      authentication.changeAvatar(avatar).then((value) => {\n        const { user, userData } = this.props;\n\n        this.setState({\n          profileCompletion: authentication.user.getProfileCompletion({ ...user, ...userData })\n        }, () => {\n          this.props.openSnackbar('Changed avatar');\n        });\n      }).catch((reason) => {\n        const code = reason.code;\n        const message = reason.message;\n\n        switch (code) {\n          default:\n            this.props.openSnackbar(message);\n            return;\n        }\n      }).finally(() => {\n        this.setState({\n          performingAction: false,\n          loadingAvatar: false,\n\n          avatar: null,\n          avatarUrl: ''\n        });\n      });\n    });\n  };\n\n  removeAvatar = () => {\n    const { user } = this.props;\n    const { avatar, avatarUrl } = this.state;\n\n    if (!user.photoURL && !avatar && !avatarUrl) {\n      return;\n    }\n\n    if ((!user.photoURL && avatar && avatarUrl) || (user.photoURL && avatar && avatarUrl)) {\n      URL.revokeObjectURL(avatarUrl);\n\n      this.setState({\n        avatar: null,\n        avatarUrl: ''\n      }, () => {\n        this.props.openSnackbar(`Removed image ${avatar.name}`, 5);\n      });\n    } else if (user.photoURL && !avatar && !avatarUrl) {\n      this.setState({\n        performingAction: true,\n        loadingAvatar: true\n      }, () => {\n        authentication.removeAvatar().then((value) => {\n          const { user, userData } = this.props;\n\n          this.setState({\n            profileCompletion: authentication.user.getProfileCompletion({ ...user, ...userData })\n          }, () => {\n            this.props.openSnackbar('Removed avatar');\n          });\n        }).catch((reason) => {\n          const code = reason.code;\n          const message = reason.message;\n\n          switch (code) {\n            default:\n              this.props.openSnackbar(message);\n              return;\n          }\n        }).finally(() => {\n          this.setState({\n            performingAction: false,\n            loadingAvatar: false\n          });\n        });\n      });\n    }\n  };\n\n  showField = (fieldId) => {\n    if (!fieldId) {\n      return;\n    }\n\n    this.setState({\n      showingField: fieldId\n    });\n  };\n\n  hideFields = (callback) => {\n    this.setState({\n      showingField: '',\n\n      firstName: '',\n      lastName: '',\n      username: '',\n      emailAddress: '',\n\n      errors: null\n    }, () => {\n      if (callback && typeof callback === 'function') {\n        callback();\n      }\n    });\n  };\n\n  changeFirstName = () => {\n    const { firstName } = this.state;\n\n    const errors = validate({\n      firstName: firstName\n    }, {\n      firstName: constraints.firstName\n    });\n\n    if (errors) {\n      this.setState({\n        errors: errors\n      });\n\n      return;\n    }\n\n    this.setState({\n      errors: null\n    }, () => {\n      const { userData } = this.props;\n\n      if (userData && firstName === userData.firstName) {\n        return;\n      }\n\n      this.setState({\n        performingAction: true\n      }, () => {\n        authentication.changeFirstName(firstName).then(() => {\n          const { user, userData } = this.props;\n\n          this.setState({\n            profileCompletion: authentication.user.getProfileCompletion({ ...user, ...userData })\n          }, () => {\n            this.hideFields(() => {\n              this.props.openSnackbar('Changed first name');\n            });\n          });\n        }).catch((reason) => {\n          const code = reason.code;\n          const message = reason.message;\n          console.log(`Could Not Save user: (${code}) ${message}`);\n\n          switch (code) {\n            default:\n              this.props.openSnackbar(message);\n              return;\n          }\n        }).finally(() => {\n          this.setState({\n            performingAction: false\n          });\n        });\n      });\n    });\n  };\n\n  changeLastName = () => {\n    const { lastName } = this.state;\n\n    const errors = validate({\n      lastName: lastName\n    }, {\n      lastName: constraints.lastName\n    });\n\n    if (errors) {\n      this.setState({\n        errors: errors\n      });\n\n      return;\n    }\n\n    this.setState({\n      errors: null\n    }, () => {\n      const { userData } = this.props;\n\n      if (userData && lastName === userData.lastName) {\n        return;\n      }\n\n      this.setState({\n        performingAction: true\n      }, () => {\n        authentication.changeLastName(lastName).then(() => {\n          const { user, userData } = this.props;\n\n          this.setState({\n            profileCompletion: authentication.user.getProfileCompletion({ ...user, ...userData })\n          }, () => {\n            this.hideFields(() => {\n              this.props.openSnackbar('Changed last name');\n            });\n          });\n        }).catch((reason) => {\n          const code = reason.code;\n          const message = reason.message;\n\n          switch (code) {\n            default:\n              this.props.openSnackbar(message);\n              return;\n          }\n        }).finally(() => {\n          this.setState({\n            performingAction: false\n          });\n        });\n      });\n    });\n  };\n\n  changeUsername = () => {\n    const { username } = this.state;\n\n    const errors = validate({\n      username: username\n    }, {\n      username: constraints.username\n    });\n\n    if (errors) {\n      this.setState({\n        errors: errors\n      });\n\n      return;\n    }\n\n    this.setState({\n      errors: null\n    }, () => {\n      const { userData } = this.props;\n\n      if (username === userData.username) {\n        return;\n      }\n\n      this.setState({\n        performingAction: true\n      }, () => {\n        authentication.changeUsername(username).then(() => {\n          const { user, userData } = this.props;\n\n          this.setState({\n            profileCompletion: authentication.user.getProfileCompletion({ ...user, ...userData })\n          }, () => {\n            this.hideFields(() => {\n              this.props.openSnackbar('Changed username');\n            });\n          });\n        }).catch((reason) => {\n          const code = reason.code;\n          const message = reason.message;\n\n          switch (code) {\n            default:\n              this.props.openSnackbar(message);\n              return;\n          }\n        }).finally(() => {\n          this.setState({\n            performingAction: false\n          });\n        });\n      });\n    });\n  };\n\n  changeEmailAddress = () => {\n    const { emailAddress } = this.state;\n\n    const errors = validate({\n      emailAddress: emailAddress\n    }, {\n      emailAddress: constraints.emailAddress\n    });\n\n    if (errors) {\n      this.setState({\n        errors: errors\n      });\n\n      return;\n    }\n\n    this.setState({\n      errors: null\n    }, () => {\n      const { user } = this.props;\n\n      if (emailAddress === user.email) {\n        return;\n      }\n\n      this.setState({\n        performingAction: true\n      }, () => {\n        authentication.changeEmailAddress(emailAddress).then(() => {\n          const { user, userData } = this.props;\n\n          this.setState({\n            profileCompletion: authentication.user.getProfileCompletion({ ...user, ...userData })\n          }, () => {\n            this.hideFields(() => {\n              this.props.openSnackbar('Changed e-mail address');\n            });\n          });\n        }).catch((reason) => {\n          const code = reason.code;\n          const message = reason.message;\n\n          switch (code) {\n            default:\n              this.props.openSnackbar(message);\n              return;\n          }\n        }).finally(() => {\n          this.setState({\n            performingAction: false\n          });\n        });\n      });\n    });\n  };\n\n  verifyEmailAddress = () => {\n    this.setState({\n      performingAction: true\n    }, () => {\n      authentication.verifyEmailAddress().then(() => {\n        this.setState({\n          sentVerificationEmail: true\n        }, () => {\n          this.props.openSnackbar('Sent verification e-mail');\n        });\n      }).catch((reason) => {\n        const code = reason.code;\n        const message = reason.message;\n\n        switch (code) {\n          default:\n            this.props.openSnackbar(message);\n            return;\n        }\n      }).finally(() => {\n        this.setState({\n          performingAction: false\n        });\n      });\n    });\n  };\n\n  deleteAccount = () => {\n    this.setState({\n      performingAction: true\n    }, () => {\n      authentication.deleteAccount().then(() => {\n        this.props.openSnackbar('Deleted account');\n      }).catch((reason) => {\n        const code = reason.code;\n        const message = reason.message;\n\n        switch (code) {\n          default:\n            this.props.openSnackbar(message);\n            return;\n        }\n      }).finally(() => {\n        this.setState({\n          performingAction: false\n        });\n      });\n    });\n  };\n\n  changeField = (fieldId) => {\n    switch (fieldId) {\n      case 'first-name':\n        this.changeFirstName();\n        return;\n\n      case 'last-name':\n        this.changeLastName();\n        return;\n\n      case 'username':\n        this.changeUsername();\n        return;\n\n      case 'email-address':\n        this.changeEmailAddress();\n        return;\n\n      default:\n        return;\n    }\n  };\n\n  handleKeyDown = (event, fieldId) => {\n    if (!event || !fieldId) {\n      return;\n    }\n\n    if (event.altKey || event.ctrlKey || event.metaKey || event.shiftKey) {\n      return;\n    }\n\n    const key = event.key;\n\n    if (!key) {\n      return;\n    }\n\n    if (key === 'Escape') {\n      this.hideFields();\n    } else if (key === 'Enter') {\n      this.changeField(fieldId);\n    }\n  };\n\n  handleAvatarChange = (event) => {\n    if (!event) {\n      return;\n    }\n\n    const files = event.target.files;\n\n    if (!files) {\n      return;\n    }\n\n    const avatar = files[0];\n\n    if (!avatar) {\n      return;\n    }\n\n    const fileTypes = [\n      'image/gif',\n      'image/jpeg',\n      'image/png',\n      'image/webp',\n      'image/svg+xml'\n    ];\n\n    if (!fileTypes.includes(avatar.type)) {\n      return;\n    }\n\n    if (avatar.size > (20 * 1024 * 1024)) {\n      return;\n    }\n\n    this.setState({\n      avatar: avatar,\n      avatarUrl: URL.createObjectURL(avatar)\n    }, () => {\n      this.props.openSnackbar(`Selected image ${avatar.name}`, 5);\n    });\n  };\n\n  handleFirstNameChange = (event) => {\n    if (!event) {\n      return;\n    }\n\n    const firstName = event.target.value;\n\n    this.setState({\n      firstName: firstName\n    });\n  };\n\n  handleLastNameChange = (event) => {\n    if (!event) {\n      return;\n    }\n\n    const lastName = event.target.value;\n\n    this.setState({\n      lastName: lastName\n    });\n  };\n\n  handleUsernameChange = (event) => {\n    if (!event) {\n      return;\n    }\n\n    const username = event.target.value;\n\n    this.setState({\n      username: username\n    });\n  };\n\n  handleEmailAddressChange = (event) => {\n    if (!event) {\n      return;\n    }\n\n    const emailAddress = event.target.value;\n\n    this.setState({\n      emailAddress: emailAddress\n    });\n  };\n\n  render() {\n    // Styling\n    const { classes } = this.props;\n\n    // Properties\n    const {\n      user,\n      userData\n    } = this.props;\n\n    // Events\n    const {\n      onDeleteAccountClick\n    } = this.props;\n\n    const {\n      profileCompletion,\n      securityRating,\n\n      showingField,\n\n      performingAction,\n      loadingAvatar,\n\n      avatar,\n      avatarUrl,\n      firstName,\n      lastName,\n      username,\n      emailAddress,\n\n      sentVerificationEmail,\n\n      errors\n    } = this.state;\n\n    const hasFirstName = userData && userData.firstName;\n    const hasLastName = userData && userData.lastName;\n    const hasUsername = userData && userData.username;\n\n    return (\n      <DialogContent classes={{ root: classes.dialogContent }}>\n        <Box mb={2}>\n          <Hidden xsDown>\n            <Grid alignItems=\"center\" container>\n              <Grid item xs>\n                <Box textAlign=\"center\">\n                  <Box mb={1.5}>\n                    {(avatar && avatarUrl) &&\n                      <Badge classes={{ badge: classes.badge }} badgeContent={\n                        <Tooltip title=\"Remove\">\n                          <Fab classes={{ sizeSmall: classes.small }} color=\"secondary\" disabled={performingAction} size=\"small\" onClick={this.removeAvatar}>\n                            <CloseIcon fontSize=\"small\" />\n                          </Fab>\n                        </Tooltip>\n                      }>\n                        {loadingAvatar &&\n                          <Badge classes={{ badge: classes.loadingBadge }} badgeContent={\n                            <Fade\n                              style={{ transitionDelay: '1s' }}\n                              in={loadingAvatar}\n                              unmountOnExit>\n                              <CircularProgress size={120} thickness={1.8} />\n                            </Fade>\n                          }>\n                            <Avatar className={classes.avatar} alt=\"Avatar\" src={avatarUrl} />\n                          </Badge>\n                        }\n\n                        {!loadingAvatar &&\n                          <Avatar className={classes.avatar} alt=\"Avatar\" src={avatarUrl} />\n                        }\n                      </Badge>\n                    }\n\n                    {(!avatar && !avatarUrl) &&\n                      <>\n                        {user.photoURL &&\n                          <Badge classes={{ badge: classes.badge }} badgeContent={\n                            <Tooltip title=\"Remove\">\n                              <Fab classes={{ sizeSmall: classes.small }} color=\"secondary\" disabled={performingAction} size=\"small\" onClick={this.removeAvatar}>\n                                <CloseIcon fontSize=\"small\" />\n                              </Fab>\n                            </Tooltip>\n                          }>\n                            {loadingAvatar &&\n                              <Badge classes={{ badge: classes.loadingBadge }} badgeContent={\n                                <Fade\n                                  style={{ transitionDelay: '1s' }}\n                                  in={loadingAvatar}\n                                  unmountOnExit>\n                                  <CircularProgress size={120} thickness={1.8} />\n                                </Fade>\n                              }>\n                                <Avatar className={classes.avatar} alt=\"Avatar\" src={user.photoURL} />\n                              </Badge>\n                            }\n\n                            {!loadingAvatar &&\n                              <Avatar className={classes.avatar} alt=\"Avatar\" src={user.photoURL} />\n                            }\n                          </Badge>\n                        }\n\n                        {!user.photoURL &&\n                          <>\n                            {loadingAvatar &&\n                              <Badge classes={{ badge: classes.loadingBadge }} badgeContent={\n                                <Fade\n                                  style={{ transitionDelay: '1s' }}\n                                  in={loadingAvatar}\n                                  unmountOnExit>\n                                  <CircularProgress size={120} thickness={1.8} />\n                                </Fade>\n                              }>\n                                <Avatar className={classes.avatar} alt=\"Avatar\">\n                                  <Typography className={classes.nameInitials} variant=\"h2\">\n                                    {this.getNameInitialsOrIcon()}\n                                  </Typography>\n                                </Avatar>\n                              </Badge>\n                            }\n\n                            {!loadingAvatar &&\n                              <Avatar className={classes.avatar} alt=\"Avatar\">\n                                <Typography className={classes.nameInitials} variant=\"h2\">\n                                  {this.getNameInitialsOrIcon()}\n                                </Typography>\n                              </Avatar>\n                            }\n                          </>\n                        }\n                      </>\n                    }\n                  </Box>\n\n                  {(avatar && avatarUrl) &&\n                    <Button color=\"primary\" disabled={performingAction} startIcon={<CloudUploadIcon />} variant=\"contained\" onClick={this.uploadAvatar}>\n                      Upload\n                    </Button>\n                  }\n\n                  {(!avatar && !avatarUrl) &&\n                    <>\n                      <input\n                        id=\"avatar-input\"\n                        type=\"file\"\n                        hidden\n                        accept=\"image/*\"\n\n                        onChange={this.handleAvatarChange}\n                      />\n\n                      <label htmlFor=\"avatar-input\">\n                        <Button color=\"primary\" component=\"span\" disabled={performingAction} startIcon={<PhotoIcon />} variant=\"contained\">\n                          Choose...\n                        </Button>\n                      </label>\n                    </>\n                  }\n                </Box>\n              </Grid>\n\n              <Grid item xs>\n                <Box textAlign=\"center\">\n                  <Typography variant=\"body1\">Profile Completion</Typography>\n\n                  {profileCompletion === 0 &&\n                    <Typography color=\"error\" variant=\"h5\">{profileCompletion}%</Typography>\n                  }\n\n                  {profileCompletion === 100 &&\n                    <Typography color=\"primary\" variant=\"h5\">{profileCompletion}%</Typography>\n                  }\n\n                  {(profileCompletion !== 0 && profileCompletion !== 100)  &&\n                    <Typography color=\"secondary\" variant=\"h5\">{profileCompletion}%</Typography>\n                  }\n                </Box>\n              </Grid>\n\n              <Grid item xs>\n                <Box textAlign=\"center\">\n                  <Typography variant=\"body1\">Security Rating</Typography>\n\n                  {securityRating === 0 &&\n                    <Typography color=\"error\" variant=\"h5\">{securityRating}%</Typography>\n                  }\n\n                  {securityRating === 100 &&\n                    <Typography color=\"primary\" variant=\"h5\">{securityRating}%</Typography>\n                  }\n\n                  {(securityRating !== 0 && securityRating !== 100) &&\n                    <Typography color=\"secondary\" variant=\"h5\">{securityRating}%</Typography>\n                  }\n                </Box>\n              </Grid>\n            </Grid>\n          </Hidden>\n\n          <Hidden smUp>\n            <Box textAlign=\"center\" mb={3}>\n              <Box mb={1.5}>\n                {(avatar && avatarUrl) &&\n                  <Badge classes={{ badge: classes.badge }} badgeContent={\n                    <Tooltip title=\"Remove\">\n                      <Fab classes={{ sizeSmall: classes.small }} color=\"secondary\" disabled={performingAction} size=\"small\" onClick={this.removeAvatar}>\n                        <CloseIcon fontSize=\"small\" />\n                      </Fab>\n                    </Tooltip>\n                  }>\n                    {loadingAvatar &&\n                      <Badge classes={{ badge: classes.loadingBadge }} badgeContent={\n                        <Fade\n                          style={{ transitionDelay: '1s' }}\n                          in={loadingAvatar}\n                          unmountOnExit>\n                          <CircularProgress size={120} thickness={1.8} />\n                        </Fade>\n                      }>\n                        <Avatar className={classes.avatar} alt=\"Avatar\" src={avatarUrl} />\n                      </Badge>\n                    }\n\n                    {!loadingAvatar &&\n                      <Avatar className={classes.avatar} alt=\"Avatar\" src={avatarUrl} />\n                    }\n                  </Badge>\n                }\n\n                {(!avatar && !avatarUrl) &&\n                  <>\n                    {user.photoURL &&\n                      <Badge classes={{ badge: classes.badge }} badgeContent={\n                        <Tooltip title=\"Remove\">\n                          <Fab classes={{ sizeSmall: classes.small }} color=\"secondary\" disabled={performingAction} size=\"small\" onClick={this.removeAvatar}>\n                            <CloseIcon fontSize=\"small\" />\n                          </Fab>\n                        </Tooltip>\n                      }>\n                        {loadingAvatar &&\n                          <Badge classes={{ badge: classes.loadingBadge }} badgeContent={\n                            <CircularProgress size={120} thickness={1.8} />\n                          }>\n                            <Avatar className={classes.avatar} alt=\"Avatar\" src={user.photoURL} />\n                          </Badge>\n                        }\n\n                        {!loadingAvatar &&\n                          <Avatar className={classes.avatar} alt=\"Avatar\" src={user.photoURL} />\n                        }\n                      </Badge>\n                    }\n\n                    {!user.photoURL &&\n                      <>\n                        {loadingAvatar &&\n                          <Badge classes={{ badge: classes.loadingBadge }} badgeContent={\n                            <Fade\n                              style={{ transitionDelay: '1s' }}\n                              in={loadingAvatar}\n                              unmountOnExit>\n                              <CircularProgress size={120} thickness={1.8} />\n                            </Fade>\n                          }>\n                            <Avatar className={classes.avatar} alt=\"Avatar\">\n                              <Typography className={classes.nameInitials} variant=\"h2\">\n                                {this.getNameInitialsOrIcon()}\n                              </Typography>\n                            </Avatar>\n                          </Badge>\n                        }\n\n                        {!loadingAvatar &&\n                          <Avatar className={classes.avatar} alt=\"Avatar\">\n                            <Typography className={classes.nameInitials} variant=\"h2\">\n                              {this.getNameInitialsOrIcon()}\n                            </Typography>\n                          </Avatar>\n                        }\n                      </>\n                    }\n                  </>\n                }\n              </Box>\n\n              {(avatar && avatarUrl) &&\n                <Button color=\"primary\" disabled={performingAction} startIcon={<CloudUploadIcon />} variant=\"contained\" onClick={this.uploadAvatar}>\n                  Upload\n                </Button>\n              }\n\n              {(!avatar && !avatarUrl) &&\n                <>\n                  <input\n                    id=\"avatar-input\"\n                    type=\"file\"\n                    hidden\n                    accept=\"image/*\"\n\n                    onChange={this.handleAvatarChange}\n                  />\n\n                  <label htmlFor=\"avatar-input\">\n                    <Button color=\"primary\" component=\"span\" disabled={performingAction} startIcon={<PhotoIcon />} variant=\"contained\">\n                      Choose...\n                    </Button>\n                  </label>\n                </>\n              }\n            </Box>\n\n            <Grid container>\n              <Grid item xs>\n                <Box textAlign=\"center\">\n                  <Typography variant=\"body1\">Profile Completion</Typography>\n\n                  {profileCompletion === 0 &&\n                    <Typography color=\"error\" variant=\"h5\">{profileCompletion}%</Typography>\n                  }\n\n                  {profileCompletion === 100 &&\n                    <Typography color=\"primary\" variant=\"h5\">{profileCompletion}%</Typography>\n                  }\n\n                  {(profileCompletion !== 0 && profileCompletion !== 100)  &&\n                    <Typography color=\"secondary\" variant=\"h5\">{profileCompletion}%</Typography>\n                  }\n                </Box>\n              </Grid>\n\n              <Grid item xs>\n                <Box textAlign=\"center\">\n                  <Typography variant=\"body1\">Security Rating</Typography>\n\n                  {securityRating === 0 &&\n                    <Typography color=\"error\" variant=\"h5\">{securityRating}%</Typography>\n                  }\n\n                  {securityRating === 100 &&\n                    <Typography color=\"primary\" variant=\"h5\">{securityRating}%</Typography>\n                  }\n\n                  {(securityRating !== 0 && securityRating !== 100) &&\n                    <Typography color=\"secondary\" variant=\"h5\">{securityRating}%</Typography>\n                  }\n                </Box>\n              </Grid>\n            </Grid>\n          </Hidden>\n        </Box>\n\n        <List disablePadding>\n          <ListItem>\n            <Hidden xsDown>\n              <ListItemIcon>\n                <PersonIcon />\n              </ListItemIcon>\n            </Hidden>\n\n            {!hasFirstName &&\n              <ListItemIcon>\n                <Tooltip title=\"No first name\">\n                  <WarningIcon color=\"error\" />\n                </Tooltip>\n              </ListItemIcon>\n            }\n\n            {showingField === 'first-name' &&\n              <TextField\n                autoComplete=\"given-name\"\n                autoFocus\n                disabled={performingAction}\n                error={!!(errors && errors.firstName)}\n                fullWidth\n                helperText={(errors && errors.firstName) ? errors.firstName[0] : 'Press Enter to change your first name'}\n                label=\"First name\"\n                placeholder={hasFirstName && userData.firstName}\n                required\n                type=\"text\"\n                value={firstName}\n                variant=\"filled\"\n\n                onBlur={this.hideFields}\n                onKeyDown={(event) => this.handleKeyDown(event, 'first-name')}\n\n                onChange={this.handleFirstNameChange}\n              />\n            }\n\n            {showingField !== 'first-name' &&\n              <>\n                <ListItemText\n                  primary=\"First name\"\n                  secondary={hasFirstName ? userData.firstName : 'You dont have a first name'}\n                />\n\n                <ListItemSecondaryAction>\n                  {hasFirstName &&\n                    <Tooltip title=\"Change\">\n                      <div>\n                        <IconButton disabled={performingAction} onClick={() => this.showField('first-name')}>\n                          <EditIcon />\n                        </IconButton>\n                      </div>\n                    </Tooltip>\n                  }\n\n                  {!hasFirstName &&\n                    <Button\n                      color=\"primary\"\n                      disabled={performingAction}\n                      variant=\"contained\"\n                      onClick={() => this.showField('first-name')}>\n                      Add\n                    </Button>\n                  }\n                </ListItemSecondaryAction>\n              </>\n            }\n          </ListItem>\n\n          <ListItem>\n            <Hidden xsDown>\n              <ListItemIcon>\n                <PersonIcon />\n              </ListItemIcon>\n            </Hidden>\n\n            {!hasLastName &&\n              <ListItemIcon>\n                <Tooltip title=\"No last name\">\n                  <WarningIcon color=\"error\" />\n                </Tooltip>\n              </ListItemIcon>\n            }\n\n            {showingField === 'last-name' &&\n              <TextField\n                autoComplete=\"family-name\"\n                autoFocus\n                disabled={performingAction}\n                error={!!(errors && errors.lastName)}\n                fullWidth\n                helperText={(errors && errors.lastName) ? errors.lastName[0] : 'Press Enter to change your last name'}\n                label=\"Last name\"\n                placeholder={hasLastName && userData.lastName}\n                required\n                type=\"text\"\n                value={lastName}\n                variant=\"filled\"\n\n                onBlur={this.hideFields}\n                onKeyDown={(event) => this.handleKeyDown(event, 'last-name')}\n\n                onChange={this.handleLastNameChange}\n              />\n            }\n\n            {showingField !== 'last-name' &&\n              <>\n                <ListItemText\n                  primary=\"Last name\"\n                  secondary={hasLastName ? userData.lastName : 'You dont have a last name'}\n                />\n\n                <ListItemSecondaryAction>\n                  {hasLastName &&\n                    <Tooltip title=\"Change\">\n                      <div>\n                        <IconButton disabled={performingAction} onClick={() => this.showField('last-name')}>\n                          <EditIcon />\n                        </IconButton>\n                      </div>\n                    </Tooltip>\n                  }\n\n                  {!hasLastName &&\n                    <Button\n                      color=\"primary\"\n                      disabled={performingAction}\n                      variant=\"contained\"\n                      onClick={() => this.showField('last-name')}>\n                      Add\n                    </Button>\n                  }\n                </ListItemSecondaryAction>\n              </>\n            }\n          </ListItem>\n\n          <ListItem>\n            <Hidden xsDown>\n              <ListItemIcon>\n                <PersonOutlineIcon />\n              </ListItemIcon>\n            </Hidden>\n\n            {!hasUsername &&\n              <ListItemIcon>\n                <Tooltip title=\"No username\">\n                  <WarningIcon color=\"error\" />\n                </Tooltip>\n              </ListItemIcon>\n            }\n\n            {showingField === 'username' &&\n              <TextField\n                autoComplete=\"username\"\n                autoFocus\n                disabled={performingAction}\n                error={!!(errors && errors.username)}\n                fullWidth\n                helperText={(errors && errors.username) ? errors.username[0] : 'Press Enter to change your BGG username'}\n                label=\"BGG Username\"\n                placeholder={hasUsername && userData.username}\n                required\n                type=\"text\"\n                value={username}\n                variant=\"filled\"\n\n                onBlur={this.hideFields}\n                onKeyDown={(event) => this.handleKeyDown(event, 'username')}\n\n                onChange={this.handleUsernameChange}\n              />\n            }\n\n            {showingField !== 'username' &&\n              <>\n                <ListItemText\n                  primary=\"BGG Username\"\n                  secondary={hasUsername ? userData.username : 'You dont have a bgg username'}\n                />\n\n                <ListItemSecondaryAction>\n                  {hasUsername &&\n                    <Tooltip title=\"Change\">\n                      <div>\n                        <IconButton disabled={performingAction} onClick={() => this.showField('username')}>\n                          <EditIcon />\n                        </IconButton>\n                      </div>\n                    </Tooltip>\n                  }\n\n                  {!hasUsername &&\n                    <Button\n                      color=\"primary\"\n                      disabled={performingAction}\n                      variant=\"contained\"\n                      onClick={() => this.showField('username')}>\n                      Add\n                    </Button>\n                  }\n                </ListItemSecondaryAction>\n              </>\n            }\n          </ListItem>\n\n          <ListItem>\n            <Hidden xsDown>\n              <ListItemIcon>\n                <EmailIcon />\n              </ListItemIcon>\n            </Hidden>\n\n            {user.email &&\n              <ListItemIcon>\n                <>\n                  {user.emailVerified &&\n                    <Tooltip title=\"Verified\">\n                      <CheckIcon color=\"primary\" />\n                    </Tooltip>\n                  }\n\n                  {!user.emailVerified &&\n                    <Tooltip title=\"Not verified\">\n                      <WarningIcon color=\"error\" />\n                    </Tooltip>\n                  }\n                </>\n              </ListItemIcon>\n            }\n\n            {!user.email &&\n              <ListItemIcon>\n                <Tooltip title=\"No e-mail address\">\n                  <WarningIcon color=\"error\" />\n                </Tooltip>\n              </ListItemIcon>\n            }\n\n            {showingField === 'email-address' &&\n              <TextField\n                autoComplete=\"email\"\n                autoFocus\n                disabled={performingAction}\n                error={!!(errors && errors.emailAddress)}\n                fullWidth\n                helperText={(errors && errors.emailAddress) ? errors.emailAddress[0] : 'Press Enter to change your e-mail address'}\n                label=\"E-mail address\"\n                placeholder={user.email}\n                required\n                type=\"email\"\n                value={emailAddress}\n                variant=\"filled\"\n\n                onBlur={this.hideFields}\n                onKeyDown={(event) => this.handleKeyDown(event, 'email-address')}\n\n                onChange={this.handleEmailAddressChange}\n              />\n            }\n\n            {showingField !== 'email-address' &&\n              <>\n                <ListItemText\n                  primary=\"E-mail address\"\n                  secondary={user.email ? user.email : 'You dont have an e-mail address'}\n                />\n\n                {(user.email && !user.emailVerified) &&\n                  <Box clone mr={7}>\n                    <ListItemSecondaryAction>\n                      <Tooltip title=\"Verify\">\n                        <div>\n                          <IconButton color=\"secondary\" disabled={performingAction || sentVerificationEmail} onClick={this.verifyEmailAddress}>\n                            <CheckIcon />\n                          </IconButton>\n                        </div>\n                      </Tooltip>\n                    </ListItemSecondaryAction>\n                  </Box>\n                }\n\n                <ListItemSecondaryAction>\n                  {user.email &&\n                    <Tooltip title=\"Change\">\n                      <div>\n                        <IconButton disabled={performingAction} onClick={() => this.showField('email-address')}>\n                          <EditIcon />\n                        </IconButton>\n                      </div>\n                    </Tooltip>\n                  }\n\n                  {!user.email &&\n                    <Button\n                      color=\"primary\"\n                      disabled={performingAction}\n                      variant=\"contained\"\n                      onClick={() => this.showField('email-address')}>\n                      Add\n                    </Button>\n                  }\n                </ListItemSecondaryAction>\n              </>\n            }\n          </ListItem>\n\n          <ListItem>\n            <Hidden xsDown>\n              <ListItemIcon>\n                <AccessTimeIcon />\n              </ListItemIcon>\n            </Hidden>\n\n            <Hidden xsDown>\n              <ListItemText\n                primary=\"Signed in\"\n                secondary={moment(user.metadata.lastSignInTime).format('LLLL')}\n              />\n            </Hidden>\n\n            <Hidden smUp>\n              <ListItemText\n                primary=\"Signed in\"\n                secondary={moment(user.metadata.lastSignInTime).format('llll')}\n              />\n            </Hidden>\n          </ListItem>\n\n          <Box mt={1} mb={1}>\n            <Divider light />\n          </Box>\n\n          <ListItem>\n            <Hidden xsDown>\n              <ListItemIcon>\n                <DeleteForeverIcon />\n              </ListItemIcon>\n            </Hidden>\n\n            <ListItemText\n              primary=\"Delete account\"\n              secondary=\"Accounts cant be recovered\"\n            />\n\n            <ListItemSecondaryAction>\n              <Button color=\"secondary\" disabled={performingAction} variant=\"contained\" onClick={onDeleteAccountClick}>Delete</Button>\n            </ListItemSecondaryAction>\n          </ListItem>\n        </List>\n      </DialogContent>\n    );\n  }\n\n  componentDidMount() {\n    const { user, userData } = this.props;\n\n    this.setState({\n      profileCompletion: authentication.user.getProfileCompletion({ ...user, ...userData }),\n      securityRating: authentication.user.getSecurityRating(user, userData)\n    });\n  }\n\n  componentWillUnmount() {\n    const { avatarUrl } = this.state;\n\n    if (avatarUrl) {\n      URL.revokeObjectURL(avatarUrl);\n\n      this.setState({\n        avatarUrl: ''\n      });\n    }\n  }\n}\n\nAccountTab.propTypes = {\n  // Styling\n  classes: PropTypes.object.isRequired,\n\n  // Properties\n  user: PropTypes.object.isRequired,\n  userData: PropTypes.object,\n\n  // Functions\n  openSnackbar: PropTypes.func.isRequired,\n\n  // Events\n  onDeleteAccountClick: PropTypes.func.isRequired\n};\n\nexport default withStyles(styles)(AccountTab);\n","import React, { Component } from 'react';\n\nimport PropTypes from 'prop-types';\n\nimport DialogContent from '@material-ui/core/DialogContent';\n\nimport Box from '@material-ui/core/Box';\n\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport ListItemSecondaryAction from '@material-ui/core/ListItemSecondaryAction';\n\nimport FormControl from '@material-ui/core/FormControl';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport Select from '@material-ui/core/Select';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport Divider from '@material-ui/core/Divider';\nimport Hidden from '@material-ui/core/Hidden';\nimport Button from '@material-ui/core/Button';\n\nimport FiberManualRecord from '@material-ui/icons/FiberManualRecord';\nimport InvertColorsIcon from '@material-ui/icons/InvertColors';\nimport FormatColorResetIcon from '@material-ui/icons/FormatColorReset';\n\nimport theming from '../../services/theming';\n\nclass AppearanceTab extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      performingAction: false\n    };\n  }\n\n  handlePrimaryColorChange = (event) => {\n    if (!event) {\n      return;\n    }\n\n    const primaryColor = event.target.value;\n\n    if (!primaryColor) {\n      return;\n    }\n\n    const { theme } = this.props;\n\n    if (!theme) {\n      return;\n    }\n\n    if (theme.primaryColor.id === primaryColor) {\n      return;\n    }\n\n    this.setState({\n      performingAction: true\n    }, () => {\n      theming.changeTheme({\n        primaryColor: primaryColor,\n        secondaryColor: theme.secondaryColor.id,\n        type: theme.type.id\n      }).then((value) => {\n        this.props.openSnackbar('Changed primary color');\n      }).catch((reason) => {\n        const code = reason.code;\n        const message = reason.message;\n\n        switch (code) {\n          default:\n            this.props.openSnackbar(message);\n            return;\n        }\n      }).finally(() => {\n        this.setState({\n          performingAction: false\n        });\n      });\n    });\n  };\n\n  handleSecondaryColorChange = (event) => {\n    if (!event) {\n      return;\n    }\n\n    const secondaryColor = event.target.value;\n\n    if (!secondaryColor) {\n      return;\n    }\n\n    const { theme } = this.props;\n\n    if (!theme) {\n      return;\n    }\n\n    if (theme.secondaryColor.id === secondaryColor) {\n      return;\n    }\n\n    this.setState({\n      performingAction: true\n    }, () => {\n      theming.changeTheme({\n        primaryColor: theme.primaryColor.id,\n        secondaryColor: secondaryColor,\n        type: theme.type.id\n      }).then((value) => {\n        this.props.openSnackbar('Changed secondary color');\n      }).catch((reason) => {\n        const code = reason.code;\n        const message = reason.message;\n\n        switch (code) {\n          default:\n            this.props.openSnackbar(message);\n            return;\n        }\n      }).finally(() => {\n        this.setState({\n          performingAction: false\n        });\n      });\n    });\n  };\n\n  handleTypeChange = (event) => {\n    if (!event) {\n      return;\n    }\n\n    const type = event.target.value;\n\n    if (!type) {\n      return;\n    }\n\n    const { theme } = this.props;\n\n    if (!theme) {\n      return;\n    }\n\n    if (theme.type.id === type) {\n      return;\n    }\n\n    this.setState({\n      performingAction: true\n    }, () => {\n      theming.changeTheme({\n        primaryColor: theme.primaryColor.id,\n        secondaryColor: theme.secondaryColor.id,\n        type: type\n      }).then((value) => {\n        this.props.openSnackbar('Changed type');\n      }).catch((reason) => {\n        const code = reason.code;\n        const message = reason.message;\n\n        switch (code) {\n          default:\n            this.props.openSnackbar(message);\n            return;\n        }\n      }).finally(() => {\n        this.setState({\n          performingAction: false\n        });\n      });\n    });\n  };\n\n  handleResetClick = () => {\n    const { theme } = this.props;\n\n    if (!theme) {\n      return;\n    }\n\n    if (theming.isDefaultTheme(theme)) {\n      return;\n    }\n\n    this.setState({\n      performingAction: true\n    }, () => {\n      theming.resetTheme().then((value) => {\n        this.props.openSnackbar('Reset theme');\n      }).catch((reason) => {\n        const code = reason.code;\n        const message = reason.message;\n\n        switch (code) {\n          default:\n            this.props.openSnackbar(message);\n            return;\n        }\n      }).finally(() => {\n        this.setState({\n          performingAction: false\n        });\n      });\n    });\n  };\n\n  render() {\n    // Properties\n    const { theme } = this.props;\n\n    if (!theme) {\n      return null;\n    }\n\n    const { performingAction } = this.state;\n\n    return (\n      <DialogContent>\n        <List disablePadding>\n          <Box mb={1}>\n            <ListItem>\n              <ListItemIcon>\n                <FiberManualRecord color=\"primary\" />\n              </ListItemIcon>\n\n              <FormControl disabled={performingAction} fullWidth>\n                <InputLabel>Primary color</InputLabel>\n\n                <Hidden smUp>\n                  <Select\n                    native\n                    value={theme.primaryColor.id}\n\n                    onChange={this.handlePrimaryColorChange}>\n                    {Object.keys(theming.colors).map((color) => {\n                      color = theming.colors[color];\n\n                      return (\n                        <option key={color.id} value={color.id}>{color.name}</option>\n                      );\n                    })}\n                  </Select>\n                </Hidden>\n\n                <Hidden xsDown>\n                  <Select\n                    value={theme.primaryColor.id}\n\n                    onChange={this.handlePrimaryColorChange}>\n                    {Object.keys(theming.colors).map((color) => {\n                      color = theming.colors[color];\n\n                      return (\n                        <MenuItem key={color.id} value={color.id}>{color.name}</MenuItem>\n                      );\n                    })}\n                  </Select>\n                </Hidden>\n              </FormControl>\n            </ListItem>\n          </Box>\n\n          <Box mb={1}>\n            <ListItem>\n              <ListItemIcon>\n                <FiberManualRecord color=\"secondary\" />\n              </ListItemIcon>\n\n              <FormControl disabled={performingAction} fullWidth>\n                <InputLabel>Secondary color</InputLabel>\n\n                <Hidden smUp>\n                  <Select\n                    native\n                    value={theme.secondaryColor.id}\n\n                    onChange={this.handleSecondaryColorChange}>\n                    {Object.keys(theming.colors).map((color) => {\n                      color = theming.colors[color];\n\n                      return (\n                        <option key={color.id} value={color.id}>{color.name}</option>\n                      );\n                    })}\n                  </Select>\n                </Hidden>\n\n                <Hidden xsDown>\n                  <Select\n                    value={theme.secondaryColor.id}\n\n                    onChange={this.handleSecondaryColorChange}>\n                    {Object.keys(theming.colors).map((color) => {\n                      color = theming.colors[color];\n\n                      return (\n                        <MenuItem key={color.id} value={color.id}>{color.name}</MenuItem>\n                      );\n                    })}\n                  </Select>\n                </Hidden>\n              </FormControl>\n            </ListItem>\n          </Box>\n\n          <Box mb={1}>\n            <ListItem>\n              <ListItemIcon>\n                <InvertColorsIcon />\n              </ListItemIcon>\n\n              <FormControl disabled={performingAction} fullWidth>\n                <InputLabel>Type</InputLabel>\n\n                <Hidden smUp>\n                  <Select\n                    native\n                    value={theme.type.id}\n\n                    onChange={this.handleTypeChange}>\n                    {Object.keys(theming.types).map((type) => {\n                      type = theming.types[type];\n\n                      return (\n                        <option key={type.id} value={type.id}>{type.name}</option>\n                      );\n                    })}\n                  </Select>\n                </Hidden>\n\n                <Hidden xsDown>\n                  <Select\n                    value={theme.type.id}\n\n                    onChange={this.handleTypeChange}>\n                    {Object.keys(theming.types).map((type) => {\n                      type = theming.types[type];\n\n                      return (\n                        <MenuItem key={type.id} value={type.id}>{type.name}</MenuItem>\n                      );\n                    })}\n                  </Select>\n                </Hidden>\n              </FormControl>\n            </ListItem>\n          </Box>\n\n          <Box mt={2} mb={1}>\n            <Divider light />\n          </Box>\n\n          <ListItem>\n            <Hidden xsDown>\n              <ListItemIcon>\n                <FormatColorResetIcon />\n              </ListItemIcon>\n            </Hidden>\n\n            <ListItemText\n              primary=\"Reset theme\"\n              secondary=\"Changes will be reset\"\n            />\n\n            <ListItemSecondaryAction>\n              <Button\n                color=\"secondary\"\n                disabled={theming.isDefaultTheme(theme) || performingAction}\n                variant=\"contained\"\n\n                onClick={this.handleResetClick}>\n                Reset\n              </Button>\n            </ListItemSecondaryAction>\n          </ListItem>\n        </List>\n      </DialogContent>\n    )\n  }\n}\n\nAppearanceTab.propTypes = {\n  // Properties\n  theme: PropTypes.object.isRequired,\n\n  // Functions\n  openSnackbar: PropTypes.func.isRequired\n};\n\nexport default AppearanceTab;\n","import React, { Component } from 'react'\n\nimport PropTypes from 'prop-types'\n\nimport DialogContent from '@material-ui/core/DialogContent';\n\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport ListItemSecondaryAction from '@material-ui/core/ListItemSecondaryAction';\n\nimport Box from '@material-ui/core/Box';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport IconButton from '@material-ui/core/IconButton';\n\nimport LinkIcon from '@material-ui/icons/Link';\nimport LinkOffIcon from '@material-ui/icons/LinkOff';\n\nimport FacebookBoxIcon from 'mdi-material-ui/FacebookBox';\nimport GitHubCircleIcon from 'mdi-material-ui/GithubCircle';\nimport GoogleIcon from 'mdi-material-ui/Google';\nimport MicrosoftIcon from 'mdi-material-ui/Microsoft';\nimport TwitterIcon from 'mdi-material-ui/Twitter';\nimport YahooIcon from 'mdi-material-ui/Yahoo';\n\nimport authentication from '../../services/authentication';\n\nclass LinksTab extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      performingAction: false\n    };\n  }\n\n\n  linkAuthProvider = (authProvider) => {\n    this.setState({\n      performingAction: true\n    }, () => {\n      authentication.linkAuthProvider(authProvider.providerId).then((value) => {\n        this.props.openSnackbar(`${authProvider.name} linked`, 5);\n      }).catch((reason) => {\n        const code = reason.code;\n        const message = reason.message;\n\n        switch (code) {\n          default:\n            this.props.openSnackbar(message);\n            return;\n        }\n      }).finally(() => {\n        this.setState({\n          performingAction: false\n        });\n      });\n    });\n  };\n\n  unlinkAuthProvider = (authProvider) => {\n    this.setState({\n      performingAction: true\n    }, () => {\n      authentication.unlinkAuthProvider(authProvider.providerId).then((value) => {\n        this.props.openSnackbar(`${authProvider.name} unlinked`, 4);\n      }).catch((reason) => {\n        const code = reason.code;\n        const message = reason.message;\n\n        switch (code) {\n          default:\n            this.props.openSnackbar(message);\n            return;\n        }\n      }).finally(() => {\n        this.setState({\n          performingAction: false\n        });\n      });\n    });\n  };\n\n  render() {\n    // Properties\n    const { theme } = this.props;\n\n    const { performingAction } = this.state;\n\n    const authProviders = [\n      {\n        providerId: 'facebook.com',\n        color: '#3c5a99',\n        icon: <FacebookBoxIcon />,\n        name: 'Facebook'\n      },\n      {\n        providerId: 'github.com',\n        color: '#24292e',\n        icon: <GitHubCircleIcon />,\n        name: 'GitHub'\n      },\n      {\n        providerId: 'google.com',\n        color: '#4285f4',\n        icon: <GoogleIcon />,\n        name: 'Google'\n      },\n      {\n        providerId: 'microsoft.com',\n        color: '#f65314',\n        icon: <MicrosoftIcon />,\n        name: 'Microsoft'\n      },\n      {\n        providerId: 'twitter.com',\n        color: '#1da1f2',\n        icon: <TwitterIcon />,\n        name: 'Twitter'\n      },\n      {\n        providerId: 'yahoo.com',\n        color: '#410093',\n        icon: <YahooIcon />,\n        name: 'Yahoo'\n      }\n    ];\n\n    return (\n      <DialogContent>\n        <List disablePadding>\n          {authProviders.map((authProvider) => {\n            const authProviderData = authentication.authProviderData(authProvider.providerId);\n            let identifier = null;\n\n            if (authProviderData) {\n              const displayName = authProviderData.displayName;\n              const emailAddress = authProviderData.email;\n              const phoneNumber = authProviderData.phoneNumber;\n\n              identifier = displayName || emailAddress || phoneNumber;\n            }\n\n            return (\n              <ListItem key={authProvider.providerId}>\n                <ListItemIcon>\n                  <Box color={theme.type.id === 'light' ? authProvider.color : null}>\n                    {authProvider.icon}\n                  </Box>\n                </ListItemIcon>\n\n                {authProviderData &&\n                  <ListItemText\n                    primary={authProvider.name}\n                    secondary={identifier}\n                  />\n                }\n\n                {!authProviderData &&\n                  <ListItemText\n                    primary={authProvider.name}\n                  />\n                }\n\n                <ListItemSecondaryAction>\n                  {authProviderData &&\n                    <Tooltip title=\"Unlink\">\n                      <div>\n                        <IconButton disabled={performingAction} onClick={() => this.unlinkAuthProvider(authProvider)}>\n                          <LinkOffIcon />\n                        </IconButton>\n                      </div>\n                    </Tooltip>\n                  }\n\n                  {!authProviderData &&\n                    <Tooltip title=\"Link\">\n                      <div>\n                        <IconButton disabled={performingAction} onClick={() => this.linkAuthProvider(authProvider)}>\n                          <LinkIcon />\n                        </IconButton>\n                      </div>\n                    </Tooltip>\n                  }\n                </ListItemSecondaryAction>\n              </ListItem>\n            );\n          })}\n        </List>\n      </DialogContent>\n    )\n  }\n}\n\nLinksTab.propTypes = {\n  // Properties\n  theme: PropTypes.object.isRequired,\n\n  // Functions\n  openSnackbar: PropTypes.func.isRequired\n};\n\nexport default LinksTab;\n","import React, { Component } from 'react'\n\nimport PropTypes from 'prop-types'\n\nimport validate from 'validate.js';\nimport moment from 'moment';\n\nimport DialogContent from '@material-ui/core/DialogContent';\n\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport ListItemSecondaryAction from '@material-ui/core/ListItemSecondaryAction';\n\nimport Hidden from '@material-ui/core/Hidden';\nimport TextField from '@material-ui/core/TextField';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport IconButton from '@material-ui/core/IconButton';\n\nimport LockIcon from '@material-ui/icons/Lock';\nimport EditIcon from '@material-ui/icons/Edit';\n\nimport constraints from '../../constraints';\nimport authentication from '../../services/authentication';\n\nconst initialState = {\n  showingField: '',\n\n  password: '',\n  passwordConfirmation: '',\n\n  performingAction: false,\n\n  errors: null\n};\n\nclass SecurityTab extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = initialState;\n  }\n\n  showField = (fieldId) => {\n    if (!fieldId) {\n      return;\n    }\n\n    this.setState({\n      showingField: fieldId\n    });\n  };\n\n  hideFields = (callback) => {\n    this.setState({\n      showingField: '',\n\n      password: '',\n      passwordConfirmation: '',\n\n      errors: null\n    }, () => {\n      if (callback && typeof callback === 'function') {\n        callback();\n      }\n    });\n  };\n\n  changeField = (fieldId) => {\n    switch (fieldId) {\n      case 'password':\n        const { password } = this.state;\n\n        const errors = validate({\n          password: password\n        }, {\n          password: constraints.password\n        });\n\n        if (errors) {\n          this.setState({\n            errors: errors\n          });\n\n          return;\n        }\n\n        this.setState({\n          errors: null\n        }, () => {\n          this.showField('password-confirmation');\n        });\n        return;\n\n      case 'password-confirmation':\n        this.changePassword();\n        return;\n\n      default:\n        return;\n    }\n  };\n\n  changePassword = () => {\n    const { password, passwordConfirmation } = this.state;\n\n    const errors = validate({\n      password: password,\n      passwordConfirmation: passwordConfirmation\n    }, {\n      password: constraints.password,\n      passwordConfirmation: constraints.passwordConfirmation\n    });\n\n    if (errors) {\n      this.setState({\n        errors: errors\n      });\n\n      return;\n    }\n\n    this.setState({\n      errors: null\n    }, () => {\n      this.setState({\n        performingAction: true\n      }, () => {\n        authentication.changePassword(password).then(() => {\n          this.hideFields(() => {\n            this.props.openSnackbar('Changed password');\n          });\n        }).catch((reason) => {\n          const code = reason.code;\n          const message = reason.message;\n\n          switch (code) {\n            default:\n              this.props.openSnackbar(message);\n              return;\n          }\n        }).finally(() => {\n          this.setState({\n            performingAction: false\n          });\n        });\n      });\n    });\n  };\n\n  handleKeyDown = (event, fieldId) => {\n    if (!event || !fieldId) {\n      return;\n    }\n\n    if (event.altKey || event.ctrlKey || event.metaKey || event.shiftKey) {\n      return;\n    }\n\n    const key = event.key;\n\n    if (!key) {\n      return;\n    }\n\n    if (key === 'Escape') {\n      this.hideFields();\n    } else if (key === 'Enter') {\n      this.changeField(fieldId);\n    }\n  };\n\n  handlePasswordChange = (event) => {\n    if (!event) {\n      return;\n    }\n\n    const password = event.target.value;\n\n    this.setState({\n      password: password\n    });\n  };\n\n  handlePasswordConfirmationChange = (event) => {\n    if (!event) {\n      return;\n    }\n\n    const passwordConfirmation = event.target.value;\n\n    this.setState({\n      passwordConfirmation: passwordConfirmation\n    });\n  };\n\n  render() {\n    // Properties\n    const { userData } = this.props;\n\n    const {\n      showingField,\n\n      password,\n      passwordConfirmation,\n\n      performingAction,\n\n      errors\n    } = this.state;\n\n    const hasChangedPassword = userData && userData.lastPasswordChange;\n\n    return (\n      <DialogContent>\n        <List disablePadding>\n          <ListItem>\n            <Hidden xsDown>\n              <ListItemIcon>\n                <LockIcon />\n              </ListItemIcon>\n            </Hidden>\n\n            {showingField === 'password' &&\n              <TextField\n                autoComplete=\"new-password\"\n                autoFocus\n                disabled={performingAction}\n                error={!!(errors && errors.password)}\n                fullWidth\n                helperText={(errors && errors.password) ? errors.password[0] : 'Press Enter to change your password'}\n                label=\"Password\"\n                required\n                type=\"password\"\n                value={password}\n                variant=\"filled\"\n\n                onBlur={this.hideFields}\n                onKeyDown={(event) => this.handleKeyDown(event, 'password')}\n\n                onChange={this.handlePasswordChange}\n              />\n            }\n\n            {showingField === 'password-confirmation' &&\n              <TextField\n                autoComplete=\"new-password\"\n                autoFocus\n                disabled={performingAction}\n                error={!!(errors && errors.passwordConfirmation)}\n                fullWidth\n                helperText={(errors && errors.passwordConfirmation) ? errors.passwordConfirmation[0] : 'Press Enter to change your password'}\n                label=\"Password confirmation\"\n                required\n                type=\"password\"\n                value={passwordConfirmation}\n                variant=\"filled\"\n\n                onBlur={this.hideFields}\n                onKeyDown={(event) => this.handleKeyDown(event, 'password-confirmation')}\n\n                onChange={this.handlePasswordConfirmationChange}\n              />\n            }\n\n            {(showingField !== 'password' && showingField !== 'password-confirmation') &&\n              <>\n                <Hidden xsDown>\n                  <ListItemText\n                    primary=\"Password\"\n                    secondary={hasChangedPassword ? `Last changed ${moment(userData.lastPasswordChange.toDate()).format('LL')}` : 'Never changed'}\n                  />\n                </Hidden>\n\n                <Hidden smUp>\n                  <ListItemText\n                    primary=\"Password\"\n                    secondary={hasChangedPassword ? `Last changed ${moment(userData.lastPasswordChange.toDate()).format('ll')}` : 'Never changed'}\n                  />\n                </Hidden>\n\n                <ListItemSecondaryAction>\n                  <Tooltip title=\"Change\">\n                    <div>\n                      <IconButton disabled={performingAction} onClick={() => this.showField('password')}>\n                        <EditIcon />\n                      </IconButton>\n                    </div>\n                  </Tooltip>\n                </ListItemSecondaryAction>\n              </>\n            }\n          </ListItem>\n        </List>\n      </DialogContent>\n    )\n  }\n}\n\nSecurityTab.propTypes = {\n  // Properties\n  userData: PropTypes.object,\n\n  // Functions\n  openSnackbar: PropTypes.func.isRequired\n};\n\nexport default SecurityTab;\n","import React, { Component } from 'react';\n\nimport PropTypes from 'prop-types';\n\nimport { withStyles } from '@material-ui/core/styles';\n\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogTitle from '@material-ui/core/DialogTitle';\n\nimport Typography from '@material-ui/core/Typography';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport IconButton from '@material-ui/core/IconButton';\n\nimport Tabs from '@material-ui/core/Tabs';\nimport Tab from '@material-ui/core/Tab';\n\nimport Hidden from '@material-ui/core/Hidden';\n\nimport CloseIcon from '@material-ui/icons/Close';\nimport AccountCircleIcon from '@material-ui/icons/AccountCircle';\nimport PaletteIcon from '@material-ui/icons/Palette';\nimport LinkIcon from '@material-ui/icons/Link';\nimport SecurityIcon from '@material-ui/icons/Security';\n\nimport SwipeableViews from 'react-swipeable-views';\n\nimport AccountTab from '../AccountTab';\nimport AppearanceTab from '../AppearanceTab';\nimport LinksTab from '../LinksTab';\nimport SecurityTab from '../SecurityTab';\n\nconst styles = (theme) => ({\n  closeButton: {\n    position: 'absolute',\n    right: theme.spacing(1),\n    top: theme.spacing(1)\n  },\n\n  tabs: {\n    display: 'initial'\n  }\n});\n\nconst tabs = [\n  {\n    key: 'account',\n    icon: <AccountCircleIcon />,\n    label: 'Account'\n  },\n\n  {\n    key: 'appearance',\n    icon: <PaletteIcon />,\n    label: 'Appearance'\n  },\n\n  {\n    key: 'links',\n    icon: <LinkIcon />,\n    label: 'Links'\n  },\n\n  {\n    key: 'security',\n    icon: <SecurityIcon />,\n    label: 'Security'\n  }\n];\n\nconst initialState = {\n  selectedTab: 0\n};\n\nclass SettingsDialog extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = initialState;\n  }\n\n  handleExited = () => {\n    this.setState(initialState);\n  };\n\n  handleTabChange = (event, value) => {\n    this.setState({\n      selectedTab: value\n    });\n  };\n\n  handleIndexChange = (index) => {\n    this.setState({\n      selectedTab: index\n    });\n  };\n\n  render() {\n    // Styling\n    const { classes } = this.props;\n\n    // Dialog Properties\n    const { dialogProps } = this.props;\n\n    // Custom Properties\n    const {\n      user,\n      userData,\n      theme\n    } = this.props;\n\n    // Custom Functions\n    const {\n      openSnackbar\n    } = this.props;\n\n    // Custom Functions\n    const {\n      onDeleteAccountClick\n    } = this.props;\n\n    const { selectedTab } = this.state;\n\n    return (\n      <Dialog {...dialogProps} onExited={this.handleExited}>\n        <DialogTitle disableTypography>\n          <Typography variant=\"h6\">\n            Settings\n          </Typography>\n\n          <Tooltip title=\"Close\">\n            <IconButton className={classes.closeButton} onClick={dialogProps.onClose}>\n              <CloseIcon />\n            </IconButton>\n          </Tooltip>\n        </DialogTitle>\n\n        <Hidden xsDown>\n          <Tabs\n            classes={{ root: classes.tabs }}\n            style={{ overflow: 'initial', minHeight: 'initial' }}\n\n            indicatorColor=\"primary\"\n            textColor=\"primary\"\n            value={selectedTab}\n            variant=\"fullWidth\"\n            onChange={this.handleTabChange}>\n            {tabs.map((tab) => {\n              return (\n                <Tab key={tab.key} icon={tab.icon} label={tab.label} />\n              );\n            })}\n          </Tabs>\n        </Hidden>\n\n        <Hidden smUp>\n          <Tabs\n            classes={{ root: classes.tabs }}\n            style={{ overflow: 'initial', minHeight: 'initial' }}\n\n            indicatorColor=\"primary\"\n            scrollButtons=\"off\"\n            textColor=\"primary\"\n            value={selectedTab}\n            variant=\"scrollable\"\n            onChange={this.handleTabChange}>\n            {tabs.map((tab) => {\n              return (\n                <Tab key={tab.key} icon={tab.icon} label={tab.label} />\n              );\n            })}\n          </Tabs>\n        </Hidden>\n\n        <SwipeableViews index={selectedTab} onChangeIndex={this.handleIndexChange}>\n          <AccountTab\n            user={user}\n            userData={userData}\n\n            openSnackbar={openSnackbar}\n\n            onDeleteAccountClick={onDeleteAccountClick}\n          />\n\n          <AppearanceTab\n            theme={theme}\n\n            openSnackbar={openSnackbar}\n          />\n\n          <LinksTab\n            theme={theme}\n\n            openSnackbar={openSnackbar}\n          />\n\n          <SecurityTab\n            user={user}\n            userData={userData}\n\n            openSnackbar={openSnackbar}\n          />\n        </SwipeableViews>\n      </Dialog>\n    );\n  }\n}\n\nSettingsDialog.propTypes = {\n  // Styling\n  classes: PropTypes.object.isRequired,\n\n  // Dialog Properties\n  dialogProps: PropTypes.object.isRequired,\n\n  // Custom Properties\n  user: PropTypes.object.isRequired,\n  userData: PropTypes.object,\n  theme: PropTypes.object.isRequired,\n\n  // Custom Functions\n  openSnackbar: PropTypes.func.isRequired,\n\n  // Custom Events\n  onDeleteAccountClick: PropTypes.func.isRequired\n};\n\nexport default withStyles(styles)(SettingsDialog);\n","import React, { Component } from 'react';\n\nimport PropTypes from 'prop-types';\n\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogActions from '@material-ui/core/DialogActions';\n\nimport Hidden from '@material-ui/core/Hidden';\nimport Box from '@material-ui/core/Box';\nimport TextField from '@material-ui/core/TextField';\nimport Button from '@material-ui/core/Button';\n\nconst initialState = {\n  username: ''\n};\n\nclass DeleteAccountDialog extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = initialState;\n  }\n\n  handleKeyPress = (event) => {\n    const { userData } = this.props;\n\n    if (userData && userData.username) {\n      const { username } = this.state;\n\n      if (!username) {\n        return;\n      }\n\n      if (username !== userData.username) {\n        return;\n      }\n    }\n\n    const key = event.key;\n\n    if (event.altKey || event.ctrlKey || event.metaKey || event.shiftKey) {\n      return;\n    }\n\n    if (key === 'Enter') {\n      this.props.deleteAccount();\n    }\n  };\n\n  handleExited = () => {\n    this.setState(initialState);\n  };\n\n  handleUsernameChange = (event) => {\n    const username = event.target.value;\n\n    this.setState({\n      username: username\n    });\n  };\n\n  render() {\n    // Dialog Properties\n    const { dialogProps } = this.props;\n\n    // Custom Properties\n    const { performingAction, userData } = this.props;\n\n    // Custom Functions\n    const { deleteAccount } = this.props;\n\n    const { username } = this.state;\n\n    const hasUsername = userData && userData.username;\n\n    return (\n      <Dialog {...dialogProps} onKeyPress={this.handleKeyPress} onExited={this.handleExited}>\n        <DialogTitle>\n          Delete account?\n        </DialogTitle>\n\n        <DialogContent>\n          <Box mb={hasUsername ? 2 : 0}>\n            <DialogContentText>\n              Deleted accounts cant be recovered.\n              All data associated with your account will be deleted.\n            </DialogContentText>\n\n            {hasUsername &&\n              <DialogContentText>\n                Type your username and <Hidden xsDown>click</Hidden><Hidden smUp>tap</Hidden> Delete to delete your account.\n                This action is irreversible.\n              </DialogContentText>\n            }\n          </Box>\n\n          {hasUsername &&\n            <TextField\n              autoComplete=\"username\"\n              autoFocus\n              color=\"secondary\"\n              disabled={performingAction}\n              fullWidth\n              label=\"Username\"\n              placeholder={userData.username}\n              required\n              type=\"text\"\n              value={username}\n              variant=\"outlined\"\n\n              onChange={this.handleUsernameChange}\n            />\n          }\n        </DialogContent>\n\n        <DialogActions>\n          <Button color=\"secondary\" disabled={performingAction} onClick={dialogProps.onClose}>Cancel</Button>\n          <Button color=\"secondary\" disabled={performingAction || (hasUsername && username !== userData.username)} variant=\"contained\" onClick={deleteAccount}>Delete</Button>\n        </DialogActions>\n      </Dialog>\n    );\n  }\n}\n\nDeleteAccountDialog.propTypes = {\n  // Dialog Properties\n  dialogProps: PropTypes.object.isRequired,\n\n  // Custom Properties\n  performingAction: PropTypes.bool.isRequired,\n  userData: PropTypes.object,\n\n  // Custom Functions\n  deleteAccount: PropTypes.func.isRequired\n};\n\nexport default DeleteAccountDialog;\n","import React, { Component } from 'react';\n\nimport PropTypes from 'prop-types';\n\nimport { withStyles } from '@material-ui/core/styles';\n\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogActions from '@material-ui/core/DialogActions';\n\nconst styles = (theme) => ({\n  noTitlePadding: {\n    paddingTop: theme.spacing(3)\n  }\n});\n\nclass AlertDialog extends Component {\n  render() {\n    // Styling\n    const { classes } = this.props;\n\n    // Dialog Properties\n    const { dialogProps } = this.props;\n\n    // Custom Properties\n    const {\n      title,\n      contentText,\n      dismissiveAction,\n      confirmingAction,\n      acknowledgementAction\n    } = this.props;\n\n    if ((dismissiveAction || confirmingAction) && acknowledgementAction) {\n      console.error(\n        'Dialogs should contain a maximum of two actions. ' +\n        'If a single action is provided, it must be an acknowledgement action. ' +\n        'If two actions are provided, one must be a confirming action, and the other a dismissing action. ' +\n        'Providing a third action such as Learn more is not recommended as it navigates the user away from the dialog, leaving the dialog task unfinished. ' +\n        'https://material.io/design/components/dialogs.html#actions'\n      );\n\n      return null;\n    }\n\n    return (\n      <Dialog {...dialogProps}>\n        {title &&\n          <DialogTitle>{title}</DialogTitle>\n        }\n\n        <DialogContent className={title ? null : classes.noTitlePadding}>\n          <DialogContentText>\n            {contentText}\n          </DialogContentText>\n        </DialogContent>\n\n        {(dismissiveAction || confirmingAction || acknowledgementAction) &&\n          <DialogActions>\n            {dismissiveAction}\n            {confirmingAction}\n            {acknowledgementAction}\n          </DialogActions>\n        }\n      </Dialog>\n    );\n  }\n}\n\nAlertDialog.propTypes = {\n  // Styling\n  classes: PropTypes.object.isRequired,\n\n  // Dialog Properties\n  dialogProps: PropTypes.object.isRequired,\n\n  // Custom Properties\n  title: PropTypes.string,\n  contentText: PropTypes.string.isRequired,\n  dismissiveAction: PropTypes.element,\n  confirmingAction: PropTypes.element,\n  acknowledgementAction: PropTypes.element,\n};\n\nexport default withStyles(styles)(AlertDialog);\n","import React, { Component } from 'react';\n\nimport PropTypes from 'prop-types';\n\nimport Hidden from '@material-ui/core/Hidden';\n\nimport SignUpDialog from '../SignUpDialog';\nimport SignInDialog from '../SignInDialog';\nimport SettingsDialog from '../SettingsDialog';\nimport DeleteAccountDialog from '../DeleteAccountDialog';\nimport AlertDialog from '../AlertDialog';\n\nclass DialogHost extends Component {\n  render() {\n    // Properties\n    const {\n      user,\n      dialogs\n    } = this.props;\n\n    const signUpDialog = dialogs.signUpDialog;\n    const signInDialog = dialogs.signInDialog;\n    const settingsDialog = dialogs.settingsDialog;\n    const deleteAccountDialog = dialogs.deleteAccountDialog;\n    const signOutDialog = dialogs.signOutDialog;\n\n    return (\n      <>\n        <Hidden xsDown>\n          {user &&\n            <>\n              <DeleteAccountDialog\n                dialogProps={deleteAccountDialog.dialogProps}\n\n                {...deleteAccountDialog.props}\n              />\n            </>\n          }\n\n          {!user &&\n            <>\n              <SignUpDialog\n                dialogProps={signUpDialog.dialogProps}\n\n                {...signUpDialog.props}\n              />\n\n              <SignInDialog\n                dialogProps={signInDialog.dialogProps}\n\n                {...signInDialog.props}\n              />\n            </>\n          }\n        </Hidden>\n\n        <Hidden smDown>\n          {user &&\n            <>\n              <SettingsDialog\n                dialogProps={settingsDialog.dialogProps}\n\n                {...settingsDialog.props}\n              />\n            </>\n          }\n        </Hidden>\n\n        <Hidden smUp>\n          {user &&\n            <>\n              <DeleteAccountDialog\n                dialogProps={{\n                  fullScreen: true,\n\n                  ...deleteAccountDialog.dialogProps\n                }}\n\n                {...deleteAccountDialog.props}\n              />\n            </>\n          }\n\n          {!user &&\n            <>\n              <SignUpDialog\n                dialogProps={{\n                  fullScreen: true,\n\n                  ...signUpDialog.dialogProps\n                }}\n\n                {...signUpDialog.props}\n              />\n\n              <SignInDialog\n                dialogProps={{\n                  fullScreen: true,\n\n                  ...signInDialog.dialogProps\n                }}\n\n                {...signInDialog.props}\n              />\n            </>\n          }\n        </Hidden>\n\n        <Hidden mdUp>\n          {user &&\n            <>\n              <SettingsDialog\n                dialogProps={{\n                  fullScreen: true,\n\n                  ...settingsDialog.dialogProps\n                }}\n\n                {...settingsDialog.props}\n              />\n            </>\n          }\n        </Hidden>\n\n        {user &&\n          <>\n            <AlertDialog\n              dialogProps={signOutDialog.dialogProps}\n\n              {...signOutDialog.props}\n            />\n          </>\n        }\n      </>\n    );\n  }\n}\n\nDialogHost.propTypes = {\n  // Properties\n  user: PropTypes.object,\n  dialogs: PropTypes.object.isRequired\n};\n\nexport default DialogHost;\n","import React, { Component } from 'react';\n\nimport readingTime from 'reading-time';\n\nimport { MuiThemeProvider } from '@material-ui/core/styles';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport Button from '@material-ui/core/Button';\nimport Snackbar from '@material-ui/core/Snackbar';\n\nimport { auth, firestore } from '../../firebase';\nimport authentication from '../../services/authentication';\nimport theming from '../../services/theming';\n\nimport LaunchScreen from '../LaunchScreen';\nimport Bar from '../Bar';\nimport Router from '../Router';\nimport DialogHost from '../DialogHost';\n\nclass App extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      user: null,\n      userData: null,\n      theme: theming.defaultTheme,\n\n      ready: false,\n      performingAction: false,\n\n      signUpDialog: {\n        open: false\n      },\n\n      signInDialog: {\n        open: false\n      },\n\n      settingsDialog: {\n        open: false\n      },\n\n      deleteAccountDialog: {\n        open: false\n      },\n\n      signOutDialog: {\n        open: false\n      },\n\n      snackbar: {\n        autoHideDuration: 0,\n        message: '',\n        open: false\n      }\n    };\n  }\n\n  openDialog = (dialogId, callback) => {\n    const dialog = this.state[dialogId];\n\n    if (!dialog || dialog.open === undefined || null) {\n      return;\n    }\n\n    dialog.open = true;\n\n    this.setState({ dialog }, callback);\n  };\n\n  closeDialog = (dialogId, callback) => {\n    const dialog = this.state[dialogId];\n\n    if (!dialog || dialog.open === undefined || null) {\n      return;\n    }\n\n    dialog.open = false;\n\n    this.setState({ dialog }, callback);\n  };\n\n  deleteAccount = () => {\n    this.setState({\n      performingAction: true\n    }, () => {\n      authentication.deleteAccount().then(() => {\n        this.closeDialog('deleteAccountDialog', () => {\n          this.openSnackbar('Deleted account');\n        });\n      }).catch((reason) => {\n        const code = reason.code;\n        const message = reason.message;\n\n        switch (code) {\n          default:\n            this.openSnackbar(message);\n            return;\n        }\n      }).finally(() => {\n        this.setState({\n          performingAction: false\n        });\n      });\n    });\n  };\n\n  signOut = () => {\n    this.setState({\n      performingAction: true\n    }, () => {\n      authentication.signOut().then(() => {\n        this.closeDialog('signOutDialog', () => {\n          this.openSnackbar('Signed out');\n        });\n      }).catch((reason) => {\n        const code = reason.code;\n        const message = reason.message;\n\n        switch (code) {\n          default:\n            this.openSnackbar(message);\n            return;\n        }\n      }).finally(() => {\n        this.setState({\n          performingAction: false\n        });\n      });\n    });\n  };\n\n  openSnackbar = (message, autoHideDuration = 2, callback) => {\n    this.setState({\n      snackbar: {\n        autoHideDuration: readingTime(message).time * autoHideDuration,\n        message,\n        open: true\n      }\n    }, () => {\n      if (callback && typeof callback === 'function') {\n        callback();\n      }\n    });\n  };\n\n  closeSnackbar = (clearMessage = false) => {\n    const { snackbar } = this.state;\n\n    this.setState({\n      snackbar: {\n        message: clearMessage ? '' : snackbar.message,\n        open: false\n      }\n    });\n  };\n\n  render() {\n    const {\n      user,\n      userData,\n      theme,\n      ready,\n      performingAction,\n    } = this.state;\n\n    const {\n      signUpDialog,\n      signInDialog,\n      settingsDialog,\n      deleteAccountDialog,\n      signOutDialog\n    } = this.state;\n\n    const { snackbar } = this.state;\n\n    return (\n      <MuiThemeProvider theme={theme}>\n        <CssBaseline />\n\n        {!ready &&\n          <LaunchScreen />\n        }\n\n        {ready &&\n          <>\n            <Bar\n              performingAction={performingAction}\n\n              user={user}\n              userData={userData}\n\n              onSignUpClick={() => this.openDialog('signUpDialog')}\n              onSignInClick={() => this.openDialog('signInDialog')}\n\n              onSettingsClick={() => this.openDialog('settingsDialog')}\n              onSignOutClick={() => this.openDialog('signOutDialog')}\n            />\n\n            <Router user={user} userData={userData} />\n\n            <DialogHost\n              user={user}\n              dialogs={\n                {\n                  signUpDialog: {\n                    dialogProps: {\n                      open: signUpDialog.open,\n\n                      onClose: (callback) => {\n                        this.closeDialog('signUpDialog');\n\n                        if (callback && typeof callback === 'function') {\n                          callback();\n                        }\n                      }\n                    },\n\n                    props: {\n                      performingAction: performingAction,\n\n                      openSnackbar: this.openSnackbar\n                    }\n                  },\n\n                  signInDialog: {\n                    dialogProps: {\n                      open: signInDialog.open,\n\n                      onClose: (callback) => {\n                        this.closeDialog('signInDialog');\n\n                        if (callback && typeof callback === 'function') {\n                          callback();\n                        }\n                      }\n                    },\n\n                    props: {\n                      performingAction: performingAction,\n\n                      openSnackbar: this.openSnackbar\n                    }\n                  },\n\n                  settingsDialog: {\n                    dialogProps: {\n                      open: settingsDialog.open,\n\n                      onClose: () => this.closeDialog('settingsDialog')\n                    },\n\n                    props: {\n                      user: user,\n                      userData: userData,\n                      theme: theme,\n\n                      openSnackbar: this.openSnackbar,\n\n                      onDeleteAccountClick: () => this.openDialog('deleteAccountDialog')\n                    }\n                  },\n\n                  deleteAccountDialog: {\n                    dialogProps: {\n                      open: deleteAccountDialog.open,\n\n                      onClose: () => this.closeDialog('deleteAccountDialog')\n                    },\n\n                    props: {\n                      performingAction: performingAction,\n                      userData: userData,\n\n                      deleteAccount: this.deleteAccount\n                    }\n                  },\n\n                  signOutDialog: {\n                    dialogProps: {\n                      open: signOutDialog.open,\n\n                      onClose: () => this.closeDialog('signOutDialog')\n                    },\n\n                    props: {\n                      title: 'Sign out?',\n                      contentText: 'While signed out you are unable to manage your profile and conduct other activities that require you to be signed in.',\n                      dismissiveAction: <Button color=\"primary\" onClick={() => this.closeDialog('signOutDialog')}>Cancel</Button>,\n                      confirmingAction: <Button color=\"primary\" disabled={performingAction} variant=\"contained\" onClick={this.signOut}>Sign Out</Button>\n                    }\n                  }\n                }\n              }\n            />\n\n            <Snackbar\n              autoHideDuration={snackbar.autoHideDuration}\n              message={snackbar.message}\n              open={snackbar.open}\n              onClose={this.closeSnackbar}\n            />\n          </>\n        }\n      </MuiThemeProvider>\n    );\n  }\n\n  componentDidMount() {\n    this.mounted = true;\n\n    this.removeAuthStateChangedObserver = auth.onAuthStateChanged((user) => {\n      if (!user) {\n        if (this.removeReferenceListener) {\n          this.removeReferenceListener();\n        }\n\n        if (this.mounted) {\n          this.setState({\n            user: null,\n            userData: null,\n            theme: theming.defaultTheme,\n\n            ready: true\n          });\n        }\n\n        return;\n      }\n\n      const uid = user.uid;\n\n      if (!uid) {\n        if (this.removeReferenceListener) {\n          this.removeReferenceListener();\n        }\n\n        if (this.mounted) {\n          this.setState({\n            user: null,\n            userData: null,\n            theme: theming.defaultTheme,\n\n            ready: true\n          });\n        }\n\n        return;\n      }\n\n      const reference = firestore.collection('users').doc(uid);\n\n      if (!reference) {\n        if (this.removeReferenceListener) {\n          this.removeReferenceListener();\n        }\n\n        if (this.mounted) {\n          this.setState({\n            user: null,\n            userData: null,\n            theme: theming.defaultTheme,\n\n            ready: true\n          });\n        }\n\n        return;\n      }\n\n      this.removeReferenceListener = reference.onSnapshot((snapshot) => {\n        if (!snapshot.exists) {\n          if (this.mounted) {\n            this.setState({\n              user: null,\n              userData: null,\n              theme: theming.defaultTheme,\n\n              ready: true\n            });\n          }\n\n          return;\n        }\n\n        const data = snapshot.data();\n\n        if (!data) {\n          if (this.mounted) {\n            this.setState({\n              user: null,\n              userData: null,\n              theme: theming.defaultTheme,\n\n              ready: true\n            });\n          }\n\n          return;\n        }\n\n        if (data.theme) {\n          this.setState({\n            theme: theming.createTheme(data.theme)\n          });\n        } else {\n          this.setState({\n            theme: theming.defaultTheme\n          });\n        }\n\n        if (this.mounted) {\n          this.setState({\n            user: user,\n            userData: data,\n\n            ready: true\n          });\n        }\n      }, (error) => {\n        if (this.mounted) {\n          this.setState({\n            user: null,\n            userData: null,\n            theme: theming.defaultTheme,\n\n            ready: true\n          }, () => {\n            const code = error.code;\n            const message = error.message;\n\n            switch (code) {\n              default:\n                this.openSnackbar(message);\n                return;\n            }\n          });\n        }\n      });\n    });\n  }\n\n  componentWillUnmount() {\n    if (this.removeAuthStateChangedObserver) {\n      this.removeAuthStateChangedObserver();\n    }\n\n    if (this.removeReferenceListener) {\n      this.removeReferenceListener();\n    }\n\n    this.mounted = false;\n  }\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport 'typeface-roboto';\nimport './index.css';\nimport App from './components/App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.register();\n"],"sourceRoot":""}